{"ast":null,"code":"import React from \"react\";\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport config from \"../config.js\";\nimport { Redirect } from \"react-router\";\nexport var LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\nexport var LOGIN_FAILURE = \"LOGIN_FAILURE\";\nexport var LOGOUT_REQUEST = \"LOGOUT_REQUEST\";\nexport var LOGOUT_SUCCESS = \"LOGOUT_SUCCESS\";\nexport var CREATE_USER_SUCCESS = \"CREATE_USER_SUCCESS\";\nexport var CREATE_USER_FAILURE = \"CREATE_USER_FAILURE\";\nexport var UPDATE_USER_SUCCESS = \"UPDATE_USER_SUCCESS\";\nexport var UPDATE_USER_FAILURE = \"UPDATE_USER_FAILURE\";\nexport var FETCH_USERS_SUCCESS = \"FETCH_USERS_SUCCESS\";\nexport var FETCH_USERS_FAILURE = \"FETCH_USERS_FAILURE\";\nexport var DELETE_USER_SUCCESS = \"DELETE_USER_SUCCESS\";\nexport var DELETE_USER_FAILURE = \"DELETE_USER_FAILURE\";\nexport var FETCH_USER_SUCCESS = \"FETCH_USER_SUCCESS\";\nexport var FETCH_USER_FAILURE = \"FETCH_USER_FAILURE\";\nexport var FETCH_OFFLINE_USERS_SUCCESS = \"FETCH_OFFLINE_USERS_SUCCESS\";\nexport var FETCH_DOCTORS_USERS_SUCCESS = \"FETCH_DOCTORS_USERS_SUCCESS\";\nexport var EDIT_FALSE = \"EDIT_FALSE\";\nexport function receiveLogin() {\n  return {\n    type: LOGIN_SUCCESS\n  };\n}\nexport function editFalse() {\n  return {\n    type: EDIT_FALSE\n  };\n}\n\nfunction loginError(payload) {\n  return {\n    type: LOGIN_FAILURE,\n    payload\n  };\n}\n\nexport function createUserSuccess(user) {\n  return {\n    type: CREATE_USER_SUCCESS,\n    payload: {\n      user\n    }\n  };\n}\nexport function updateUserSuccess(user) {\n  return {\n    type: UPDATE_USER_SUCCESS,\n    payload: {\n      user\n    }\n  };\n}\nexport function fetchUsersSuccess(users) {\n  return {\n    type: FETCH_USERS_SUCCESS,\n    payload: {\n      users\n    }\n  };\n}\nexport function fetchOfflineUsersSuccess(all_users) {\n  return {\n    type: FETCH_OFFLINE_USERS_SUCCESS,\n    payload: {\n      all_users\n    }\n  };\n}\nexport function fetchDoctorsSuccess(doctors) {\n  return {\n    type: FETCH_DOCTORS_USERS_SUCCESS,\n    payload: {\n      doctors\n    }\n  };\n}\n\nfunction createUserError(payload) {\n  return {\n    type: CREATE_USER_FAILURE,\n    payload\n  };\n}\n\nexport function getUserSuccess(user) {\n  return {\n    type: FETCH_USER_SUCCESS,\n    payload: {\n      user\n    }\n  };\n}\nexport function deleteUserSuccess(user_id) {\n  return {\n    type: DELETE_USER_SUCCESS,\n    payload: {\n      user_id\n    }\n  };\n}\n\nfunction deleteUserFailer(payload) {\n  return {\n    type: DELETE_USER_FAILURE,\n    payload\n  };\n}\n\nfunction getUserFailure(payload) {\n  return {\n    type: FETCH_USER_FAILURE,\n    payload\n  };\n}\n\nfunction updateUserFailure(payload) {\n  return {\n    type: UPDATE_USER_FAILURE\n  };\n}\n\nfunction fetchUsersError(payload) {\n  return {\n    type: FETCH_USERS_FAILURE,\n    payload\n  };\n}\n\nfunction requestLogout() {\n  return {\n    type: LOGOUT_REQUEST\n  };\n}\n\nexport function receiveLogout() {\n  return {\n    type: LOGOUT_SUCCESS\n  };\n} // Logs the user out\n\nexport function logoutUser() {\n  return function (dispatch) {\n    dispatch(requestLogout());\n    localStorage.removeItem(\"authenticated\");\n    dispatch(receiveLogout());\n  };\n}\nexport function loginUser(creds) {\n  return function (dispatch) {\n    // dispatch(receiveLogin());\n    if (creds.email.length > 0 && creds.password.length > 0) {\n      axios.post(config.baseURLApi + \"login\", {\n        email: creds.email,\n        password: creds.password\n      }).then(function (response) {\n        if (response.data.message === \"No user found\") {\n          Swal.fire({\n            icon: \"success\",\n            text: \"No user found\",\n            showConfirmButton: true,\n            timer: 3500\n          });\n        } else {\n          console.log(\"login resposne-------\", response.data.user);\n          dispatch(receiveLogin());\n          localStorage.setItem(\"authenticated\", true);\n          localStorage.setItem(\"current_user\", response.data.user);\n          creds.history.push(\"/login\");\n        }\n      }).catch(function (error) {\n        // handle error\n        console.log(error);\n        dispatch(loginError(error));\n      });\n    } else {\n      dispatch(loginError(\"Something was wrong. Try again\"));\n    }\n  };\n}\nexport function createUser(userData) {\n  var _this = this;\n\n  return function (dispatch) {\n    if (userData.email.length > 0 && userData.password.length > 0) {\n      var self = _this;\n      axios.post(config.baseURLApi + \"sign-up\", {\n        email: userData.email,\n        fname: userData.fname,\n        lname: userData.lname,\n        number: userData.number,\n        password: userData.password,\n        user_type: userData.user_type,\n        type: userData.type,\n        schedule: userData.schedule\n      }).then(function (response) {\n        Swal.fire({\n          icon: \"success\",\n          type: \"success\",\n          text: \"Registered successfully!\",\n          showConfirmButton: true,\n          timer: 3500\n        });\n        console.log(\"-----------000000\", response);\n        dispatch(createUserSuccess(response.data.user)); // window.location.assign('/');\n      }).catch(function (error) {\n        console.log(error);\n        dispatch(createUserError(error));\n      });\n    } else {\n      dispatch(createUserError(\"Something was wrong. Try again\"));\n    }\n  };\n}\nexport function updateUser(userData) {\n  var _this2 = this;\n\n  return function (dispatch) {\n    var self = _this2;\n    axios.post(config.baseURLApi + \"update\", {\n      id: userData.id,\n      email: userData.email,\n      fname: userData.fname,\n      lname: userData.lname,\n      number: userData.number,\n      schedule: userData.schedule\n    }).then(function (response) {\n      Swal.fire({\n        icon: \"success\",\n        type: \"success\",\n        text: \"Update successfully!\",\n        showConfirmButton: true,\n        timer: 2000\n      });\n      console.log(\"updat done\");\n      console.log(response.data.user);\n      dispatch(updateUserSuccess(response.data.user)); // window.location.assign('/');\n    }).catch(function (error) {\n      console.log(error);\n      dispatch(updateUserFailure(error));\n    });\n  };\n}\nexport function fetchUsers(type) {\n  var _this3 = this;\n\n  return function (dispatch) {\n    var self = _this3;\n    axios.get(config.baseURLApi + \"users?type=\".concat(type)).then(function (response) {\n      console.log(\"fetch user response\", response);\n      dispatch(fetchUsersSuccess(response.data.users)); // window.location.assign('/');\n    }).catch(function (error) {\n      console.log(error);\n      dispatch(fetchUsersError(error));\n    });\n  };\n}\nexport function fetchOfflineUsers() {\n  var _this4 = this;\n\n  return function (dispatch) {\n    var self = _this4;\n    axios.get(config.baseURLApi + \"offline_list\").then(function (response) {\n      console.log(\"fetch user response\", response);\n      dispatch(fetchOfflineUsersSuccess(response.data.users)); // window.location.assign('/');\n    }).catch(function (error) {\n      console.log(error);\n      dispatch(fetchUsersError(error));\n    });\n  };\n}\nexport function fetchDoctors() {\n  var _this5 = this;\n\n  return function (dispatch) {\n    var self = _this5;\n    axios.get(config.baseURLApi + \"doctors\").then(function (response) {\n      console.log(\"fetch user response\", response);\n      dispatch(fetchDoctorsSuccess(response.data.users)); // window.location.assign('/');\n    }).catch(function (error) {\n      console.log(error);\n      dispatch(fetchUsersError(error));\n    });\n  };\n}\nexport function getUser(data) {\n  return function (dispatch) {\n    axios({\n      method: \"get\",\n      url: config.baseURLApi + \"user/\" + data.id\n    }).then(function (response) {\n      dispatch(getUserSuccess(response.data.user));\n    }).catch(function (error) {\n      dispatch(getUserFailure(error));\n    });\n  };\n}\nexport function deleteUser(data) {\n  return function (dispatch) {\n    axios({\n      method: \"delete\",\n      url: config.baseURLApi + \"delete_user/\" + data.id\n    }).then(function (response) {\n      if (response.data.message == \"Not able to delete this user is used.\") {\n        Swal.fire({\n          icon: \"error\",\n          type: \"error\",\n          text: response.data.message,\n          showConfirmButton: true,\n          timer: 2000\n        });\n      } else {\n        dispatch(deleteUserSuccess(response.data.id));\n      }\n    }).catch(function (error) {\n      console.log(\"fail\");\n      dispatch(deleteUserFailer(error));\n    });\n  };\n}\nSwal.fire({\n  icon: \"success\",\n  type: \"success\",\n  text: \"Update successfully!\",\n  showConfirmButton: true,\n  timer: 2000\n});","map":{"version":3,"sources":["D:/30-12/setup 2 new/final file/src/actions/user.js"],"names":["React","axios","Swal","config","Redirect","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT_REQUEST","LOGOUT_SUCCESS","CREATE_USER_SUCCESS","CREATE_USER_FAILURE","UPDATE_USER_SUCCESS","UPDATE_USER_FAILURE","FETCH_USERS_SUCCESS","FETCH_USERS_FAILURE","DELETE_USER_SUCCESS","DELETE_USER_FAILURE","FETCH_USER_SUCCESS","FETCH_USER_FAILURE","FETCH_OFFLINE_USERS_SUCCESS","FETCH_DOCTORS_USERS_SUCCESS","EDIT_FALSE","receiveLogin","type","editFalse","loginError","payload","createUserSuccess","user","updateUserSuccess","fetchUsersSuccess","users","fetchOfflineUsersSuccess","all_users","fetchDoctorsSuccess","doctors","createUserError","getUserSuccess","deleteUserSuccess","user_id","deleteUserFailer","getUserFailure","updateUserFailure","fetchUsersError","requestLogout","receiveLogout","logoutUser","dispatch","localStorage","removeItem","loginUser","creds","email","length","password","post","baseURLApi","then","response","data","message","fire","icon","text","showConfirmButton","timer","console","log","setItem","history","push","catch","error","createUser","userData","self","fname","lname","number","user_type","schedule","updateUser","id","fetchUsers","get","fetchOfflineUsers","fetchDoctors","getUser","method","url","deleteUser"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport config from \"../config.js\";\r\nimport { Redirect } from \"react-router\";\r\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\r\nexport const LOGIN_FAILURE = \"LOGIN_FAILURE\";\r\nexport const LOGOUT_REQUEST = \"LOGOUT_REQUEST\";\r\nexport const LOGOUT_SUCCESS = \"LOGOUT_SUCCESS\";\r\nexport const CREATE_USER_SUCCESS = \"CREATE_USER_SUCCESS\";\r\nexport const CREATE_USER_FAILURE = \"CREATE_USER_FAILURE\";\r\nexport const UPDATE_USER_SUCCESS = \"UPDATE_USER_SUCCESS\";\r\nexport const UPDATE_USER_FAILURE = \"UPDATE_USER_FAILURE\";\r\nexport const FETCH_USERS_SUCCESS = \"FETCH_USERS_SUCCESS\";\r\nexport const FETCH_USERS_FAILURE = \"FETCH_USERS_FAILURE\";\r\nexport const DELETE_USER_SUCCESS = \"DELETE_USER_SUCCESS\";\r\nexport const DELETE_USER_FAILURE = \"DELETE_USER_FAILURE\";\r\nexport const FETCH_USER_SUCCESS = \"FETCH_USER_SUCCESS\";\r\nexport const FETCH_USER_FAILURE = \"FETCH_USER_FAILURE\";\r\nexport const FETCH_OFFLINE_USERS_SUCCESS = \"FETCH_OFFLINE_USERS_SUCCESS\";\r\nexport const FETCH_DOCTORS_USERS_SUCCESS = \"FETCH_DOCTORS_USERS_SUCCESS\";\r\nexport const EDIT_FALSE = \"EDIT_FALSE\";\r\n\r\nexport function receiveLogin() {\r\n  return {\r\n    type: LOGIN_SUCCESS,\r\n  };\r\n}\r\nexport function editFalse() {\r\n  return {\r\n    type: EDIT_FALSE,\r\n  };\r\n}\r\n\r\nfunction loginError(payload) {\r\n  return {\r\n    type: LOGIN_FAILURE,\r\n    payload,\r\n  };\r\n}\r\n\r\nexport function createUserSuccess(user) {\r\n  return {\r\n    type: CREATE_USER_SUCCESS,\r\n    payload: { user },\r\n  };\r\n}\r\n\r\nexport function updateUserSuccess(user) {\r\n  return {\r\n    type: UPDATE_USER_SUCCESS,\r\n    payload: { user },\r\n  };\r\n}\r\n\r\nexport function fetchUsersSuccess(users) {\r\n  return {\r\n    type: FETCH_USERS_SUCCESS,\r\n    payload: { users },\r\n  };\r\n}\r\n\r\nexport function fetchOfflineUsersSuccess(all_users) {\r\n  return {\r\n    type: FETCH_OFFLINE_USERS_SUCCESS,\r\n    payload: { all_users },\r\n  };\r\n}\r\n\r\nexport function fetchDoctorsSuccess(doctors) {\r\n  return {\r\n    type: FETCH_DOCTORS_USERS_SUCCESS,\r\n    payload: { doctors },\r\n  };\r\n}\r\n\r\nfunction createUserError(payload) {\r\n  return {\r\n    type: CREATE_USER_FAILURE,\r\n    payload,\r\n  };\r\n}\r\nexport function getUserSuccess(user) {\r\n  return {\r\n    type: FETCH_USER_SUCCESS,\r\n    payload: { user },\r\n  };\r\n}\r\nexport function deleteUserSuccess(user_id) {\r\n  return {\r\n    type: DELETE_USER_SUCCESS,\r\n    payload: { user_id },\r\n  };\r\n}\r\n\r\nfunction deleteUserFailer(payload) {\r\n  return {\r\n    type: DELETE_USER_FAILURE,\r\n    payload,\r\n  };\r\n}\r\n\r\nfunction getUserFailure(payload) {\r\n  return {\r\n    type: FETCH_USER_FAILURE,\r\n    payload,\r\n  };\r\n}\r\n\r\nfunction updateUserFailure(payload) {\r\n  return {\r\n    type: UPDATE_USER_FAILURE,\r\n  };\r\n}\r\n\r\nfunction fetchUsersError(payload) {\r\n  return {\r\n    type: FETCH_USERS_FAILURE,\r\n    payload,\r\n  };\r\n}\r\n\r\nfunction requestLogout() {\r\n  return {\r\n    type: LOGOUT_REQUEST,\r\n  };\r\n}\r\n\r\nexport function receiveLogout() {\r\n  return {\r\n    type: LOGOUT_SUCCESS,\r\n  };\r\n}\r\n\r\n// Logs the user out\r\nexport function logoutUser() {\r\n  return (dispatch) => {\r\n    dispatch(requestLogout());\r\n    localStorage.removeItem(\"authenticated\");\r\n    dispatch(receiveLogout());\r\n  };\r\n}\r\n\r\nexport function loginUser(creds) {\r\n  return (dispatch) => {\r\n    // dispatch(receiveLogin());\r\n\r\n    if (creds.email.length > 0 && creds.password.length > 0) {\r\n      axios\r\n        .post(config.baseURLApi + \"login\", {\r\n          email: creds.email,\r\n          password: creds.password,\r\n        })\r\n        .then(function (response) {\r\n          if (response.data.message === \"No user found\") {\r\n            Swal.fire({\r\n              icon: \"success\",\r\n              text: \"No user found\",\r\n              showConfirmButton: true,\r\n              timer: 3500,\r\n            });\r\n          } else {\r\n            console.log(\"login resposne-------\", response.data.user);\r\n            dispatch(receiveLogin());\r\n            localStorage.setItem(\"authenticated\", true);\r\n            localStorage.setItem(\"current_user\", response.data.user);\r\n            creds.history.push(\"/login\");\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          // handle error\r\n          console.log(error);\r\n          dispatch(loginError(error));\r\n        });\r\n    } else {\r\n      dispatch(loginError(\"Something was wrong. Try again\"));\r\n    }\r\n  };\r\n}\r\n\r\nexport function createUser(userData) {\r\n  return (dispatch) => {\r\n    if (userData.email.length > 0 && userData.password.length > 0) {\r\n      let self = this;\r\n      axios\r\n        .post(config.baseURLApi + \"sign-up\", {\r\n          email: userData.email,\r\n          fname: userData.fname,\r\n          lname: userData.lname,\r\n          number: userData.number,\r\n          password: userData.password,\r\n          user_type: userData.user_type,\r\n          type: userData.type,\r\n          schedule: userData.schedule,\r\n        })\r\n        .then(function (response) {\r\n          Swal.fire({\r\n            icon: \"success\",\r\n            type: \"success\",\r\n            text: \"Registered successfully!\",\r\n            showConfirmButton: true,\r\n            timer: 3500,\r\n          });\r\n          console.log(\"-----------000000\", response);\r\n          dispatch(createUserSuccess(response.data.user));\r\n          // window.location.assign('/');\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n          dispatch(createUserError(error));\r\n        });\r\n    } else {\r\n      dispatch(createUserError(\"Something was wrong. Try again\"));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateUser(userData) {\r\n  return (dispatch) => {\r\n    let self = this;\r\n    axios\r\n      .post(config.baseURLApi + \"update\", {\r\n        id: userData.id,\r\n        email: userData.email,\r\n        fname: userData.fname,\r\n        lname: userData.lname,\r\n        number: userData.number,\r\n        schedule: userData.schedule,\r\n      })\r\n      .then(function (response) {\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          type: \"success\",\r\n          text: \"Update successfully!\",\r\n          showConfirmButton: true,\r\n          timer: 2000,\r\n        });\r\n        console.log(\"updat done\");\r\n        console.log(response.data.user);\r\n        dispatch(updateUserSuccess(response.data.user));\r\n        // window.location.assign('/');\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n        dispatch(updateUserFailure(error));\r\n      });\r\n  };\r\n}\r\n\r\nexport function fetchUsers(type) {\r\n  return (dispatch) => {\r\n    let self = this;\r\n    axios\r\n      .get(config.baseURLApi + `users?type=${type}`)\r\n      .then(function (response) {\r\n        console.log(\"fetch user response\", response);\r\n        dispatch(fetchUsersSuccess(response.data.users));\r\n        // window.location.assign('/');\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n        dispatch(fetchUsersError(error));\r\n      });\r\n  };\r\n}\r\nexport function fetchOfflineUsers() {\r\n  return (dispatch) => {\r\n    let self = this;\r\n    axios\r\n      .get(config.baseURLApi + `offline_list`)\r\n      .then(function (response) {\r\n        console.log(\"fetch user response\", response);\r\n        dispatch(fetchOfflineUsersSuccess(response.data.users));\r\n        // window.location.assign('/');\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n        dispatch(fetchUsersError(error));\r\n      });\r\n  };\r\n}\r\n\r\nexport function fetchDoctors() {\r\n  return (dispatch) => {\r\n    let self = this;\r\n    axios\r\n      .get(config.baseURLApi + `doctors`)\r\n      .then(function (response) {\r\n        console.log(\"fetch user response\", response);\r\n        dispatch(fetchDoctorsSuccess(response.data.users));\r\n        // window.location.assign('/');\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n        dispatch(fetchUsersError(error));\r\n      });\r\n  };\r\n}\r\n\r\nexport function getUser(data) {\r\n  return (dispatch) => {\r\n    axios({\r\n      method: \"get\",\r\n      url: config.baseURLApi + \"user/\" + data.id,\r\n    })\r\n      .then((response) => {\r\n        dispatch(getUserSuccess(response.data.user));\r\n      })\r\n      .catch((error) => {\r\n        dispatch(getUserFailure(error));\r\n      });\r\n  };\r\n}\r\n\r\nexport function deleteUser(data) {\r\n  return (dispatch) => {\r\n    axios({\r\n      method: \"delete\",\r\n      url: config.baseURLApi + \"delete_user/\" + data.id,\r\n    })\r\n      .then((response) => {\r\n        if (response.data.message == \"Not able to delete this user is used.\") {\r\n          Swal.fire({\r\n            icon: \"error\",\r\n            type: \"error\",\r\n            text: response.data.message,\r\n            showConfirmButton: true,\r\n            timer: 2000,\r\n          });\r\n        } else {\r\n          dispatch(deleteUserSuccess(response.data.id));\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"fail\");\r\n        dispatch(deleteUserFailer(error));\r\n      });\r\n  };\r\n}\r\nSwal.fire({\r\n  icon: \"success\",\r\n  type: \"success\",\r\n  text: \"Update successfully!\",\r\n  showConfirmButton: true,\r\n  timer: 2000,\r\n});\r\n"]},"metadata":{},"sourceType":"module"}