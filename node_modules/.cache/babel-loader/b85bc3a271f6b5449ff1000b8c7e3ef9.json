{"ast":null,"code":"import _classCallCheck from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _defineProperty from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\src\\\\pages\\\\blog\\\\Blog.js\";\nimport React from \"react\";\nimport { Row, Col, Modal, ModalHeader, ModalBody, ModalFooter, TableCard, Card, CardImg, CardText, CardBody, CardTitle, CardSubtitle, Button } from \"reactstrap\";\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport s from \"./Dashboard.module.scss\";\nimport Widget from \"../../components/Widget\";\nimport stocksImg from \"../../images/stocks.svg\";\nimport { fetchBlogs, createBlog, getBlog, updateBlog, deleteBlog } from \"../../actions/blog\";\nimport ReactQuill from 'react-quill';\n\nvar Counsellor = /*#__PURE__*/function (_React$Component) {\n  _inherits(Counsellor, _React$Component);\n\n  function Counsellor() {\n    var _this;\n\n    _classCallCheck(this, Counsellor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Counsellor).call(this));\n\n    _defineProperty(_assertThisInitialized(_this), \"createBlog\", function (event) {\n      event.preventDefault();\n\n      if (_this.state.id == 0) {\n        _this.props.dispatch(createBlog({\n          title: _this.state.title,\n          description: _this.state.description,\n          image: _this.state.selectedFile\n        }));\n\n        {\n          /* window.location.reload();*/\n        }\n      } else {\n        _this.props.dispatch(updateBlog({\n          id: _this.state.id,\n          title: _this.state.title,\n          description: _this.state.description,\n          image: _this.state.selectedFile,\n          updateImage: _this.state.updateImage\n        })); // window.location.reload();\n\n      }\n\n      _this.props.dispatch(fetchBlogs());\n\n      _this.setState({\n        modal: false,\n        title: '',\n        description: '',\n        imgurl: '',\n        updateImage: false,\n        id: 0\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTitleChange\", function (event) {\n      _this.setState({\n        title: event.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDescChange\", function (value) {\n      _this.setState({\n        description: value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFileChange\", function (event) {\n      _this.setState({\n        selectedFile: event.target.files[0],\n        updateImage: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggle\", function () {\n      _this.setState({\n        title: '',\n        description: '',\n        imgurl: '',\n        updateImage: false,\n        id: 0\n      });\n\n      _this.setState({\n        modal: !_this.state.modal\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEdit\", function (event, val) {\n      event.preventDefault(); // this.props.dispatch(getBlog({id: id}));\n\n      console.log(val);\n      var mimeType = 'image/png';\n      var buffer = val.image;\n      var url = '';\n\n      if (buffer != null) {\n        var b64 = new Buffer(buffer).toString('base64');\n        url = \"data:\".concat(mimeType, \";base64,\").concat(b64);\n      }\n\n      _this.setState({\n        id: val.id,\n        modal: true,\n        updateImage: false,\n        title: val.title,\n        description: val.description,\n        imgUrl: url\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDelete\", function (event, id) {\n      event.preventDefault();\n\n      if (window.confirm(\"Delete the item?\")) {\n        _this.props.dispatch(deleteBlog({\n          id: id\n        }));\n      } // window.location.reload();\n\n    });\n\n    _this.state = {\n      imageURLs: null,\n      modal: false,\n      title: '',\n      description: '',\n      imgUrl: null,\n      selectedFile: '',\n      editted: false,\n      updateImage: false\n    };\n    return _this;\n  }\n\n  _createClass(Counsellor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.dispatch(fetchBlogs());\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          error = _this$props.error,\n          loading = _this$props.loading,\n          blogs = _this$props.blogs,\n          imageURLs = _this$props.imageURLs,\n          blog = _this$props.blog,\n          imgURL = _this$props.imgURL;\n      console.log(blog);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: s.root,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xl: 4,\n        style: {\n          paddingBottom: '10px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        onClick: this.toggle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }\n      }, \"Create\"), ' ')), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 9\n        }\n      }, blogs.map(function (blog) {\n        return /*#__PURE__*/React.createElement(Col, {\n          style: {\n            paddingBottom: '10px'\n          },\n          xl: 4,\n          key: blog.id,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Card, {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(CardImg, {\n          top: true,\n          width: \"100%\",\n          height: \"270px\",\n          src: imageURLs.find(function (x) {\n            return x.id === blog.id;\n          }) != undefined ? imageURLs.find(function (x) {\n            return x.id === blog.id;\n          }).url : require('../../images/blog_default.png'),\n          alt: \"Card image cap\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(CardBody, {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(CardTitle, {\n          tag: \"h5\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }\n        }, blog.title), /*#__PURE__*/React.createElement(CardText, {\n          style: {\n            \"display\": \"-webkit-box\",\n            \"maxWidth\": \"250px\",\n            \"WebkitLineClamp\": \"3\",\n            \"WebkitBoxOrient\": \"vertical\",\n            \"overflow\": \"hidden\",\n            \"textOverflow\": \"ellipsis\"\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          dangerouslySetInnerHTML: {\n            __html: blog.description\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 175\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            justifyContent: 'space-between',\n            display: 'flex'\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          onClick: function onClick(event) {\n            return _this2.onEdit(event, blog);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: require(\"../../images/edit.png\"),\n          width: \"20\",\n          height: \"25\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 66\n          }\n        })), /*#__PURE__*/React.createElement(\"a\", {\n          onClick: function onClick(event) {\n            return _this2.onDelete(event, blog.id);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: require(\"../../images/delete.png\"),\n          width: \"40\",\n          height: \"25\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 71\n          }\n        })))))));\n      })), /*#__PURE__*/React.createElement(Modal, {\n        isOpen: this.state.modal,\n        toggle: this.toggle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ModalHeader, {\n        toggle: this.toggle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }\n      }, this.state.id == 0 ? 'Create New Blog' : 'Edit Blog', \" \"), /*#__PURE__*/React.createElement(ModalBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }\n      }, \"Title\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        id: \"name\",\n        value: this.state.title,\n        onChange: function onChange(event) {\n          return _this2.onTitleChange(event);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"des\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }\n      }, \"description\"), /*#__PURE__*/React.createElement(ReactQuill, {\n        value: this.state.description,\n        onChange: this.onDescChange,\n        style: {\n          marginBottom: '35px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"image\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 15\n        }\n      }, \"Image : \"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        id: \"image\",\n        onChange: function onChange(event) {\n          return _this2.onFileChange(event);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(ModalFooter, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        onClick: function onClick(event) {\n          return _this2.createBlog(event);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }\n      }, this.state.id == 0 ? 'Create' : 'Update'), ' ', /*#__PURE__*/React.createElement(Button, {\n        color: \"secondary\",\n        onClick: this.toggle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }\n      }, \"Cancel\"))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      console.log(\"state from props\");\n\n      if (nextProps.blog != null && prevState.editted == false) {\n        return {\n          title: nextProps.blog.title,\n          description: nextProps.blog.description,\n          editted: true\n        };\n      } // Return null to indicate no change to state.\n\n\n      return null;\n    }\n  }]);\n\n  return Counsellor;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    blogs: state.blog.items,\n    imageURLs: state.blog.ary,\n    loading: state.blog.loading,\n    error: state.blog.error,\n    blog: state.blog.blog,\n    imgURL: state.blog.ary_url\n  };\n};\n\nexport default withRouter(connect(mapStateToProps)(Counsellor));","map":{"version":3,"sources":["D:/30-12/setup 2 new/final file/src/pages/blog/Blog.js"],"names":["React","Row","Col","Modal","ModalHeader","ModalBody","ModalFooter","TableCard","Card","CardImg","CardText","CardBody","CardTitle","CardSubtitle","Button","withRouter","Redirect","Link","connect","axios","s","Widget","fetchBlogs","createBlog","getBlog","updateBlog","deleteBlog","ReactQuill","Counsellor","event","preventDefault","state","id","props","dispatch","title","description","image","selectedFile","updateImage","setState","modal","imgurl","target","value","files","val","console","log","mimeType","buffer","url","b64","Buffer","toString","imgUrl","window","confirm","imageURLs","editted","error","loading","blogs","blog","imgURL","root","paddingBottom","toggle","map","find","x","undefined","require","__html","justifyContent","display","onEdit","onDelete","onTitleChange","onDescChange","marginBottom","width","onFileChange","nextProps","prevState","Component","mapStateToProps","items","ary","ary_url"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,GAAT,EAAcC,GAAd,EAAmBC,KAAnB,EAA0BC,WAA1B,EAAuCC,SAAvC,EAAkDC,WAAlD,EAAgEC,SAAhE,EAA2EC,IAA3E,EAAiFC,OAAjF,EAA0FC,QAA1F,EAAoGC,QAApG,EAA8GC,SAA9G,EAAyHC,YAAzH,EAAuIC,MAAvI,QAAqJ,YAArJ;AACA,SAASC,UAAT,EAAqBC,QAArB,EAA+BC,IAA/B,QAA2C,kBAA3C;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,CAAP,MAAc,yBAAd;AACA,OAAOC,MAAP,MAAmB,yBAAnB;;AAEA,SAASC,UAAT,EAAqBC,UAArB,EAAiCC,OAAjC,EAA0CC,UAA1C,EAAsDC,UAAtD,QAAwE,oBAAxE;AACA,OAAOC,UAAP,MAAuB,aAAvB;;IAEMC,U;;;AACJ,wBAAc;AAAA;;AAAA;;AACZ;;AADY,iEAiCD,UAACC,KAAD,EAAW;AACtBA,MAAAA,KAAK,CAACC,cAAN;;AACA,UAAG,MAAKC,KAAL,CAAWC,EAAX,IAAiB,CAApB,EAAsB;AACpB,cAAKC,KAAL,CAAWC,QAAX,CAAoBX,UAAU,CAAC;AAACY,UAAAA,KAAK,EAAE,MAAKJ,KAAL,CAAWI,KAAnB;AAA0BC,UAAAA,WAAW,EAAE,MAAKL,KAAL,CAAWK,WAAlD;AAA+DC,UAAAA,KAAK,EAAE,MAAKN,KAAL,CAAWO;AAAjF,SAAD,CAA9B;;AACA;AAAE;AAAgC;AACnC,OAHD,MAGK;AAEH,cAAKL,KAAL,CAAWC,QAAX,CAAoBT,UAAU,CAAC;AAACO,UAAAA,EAAE,EAAE,MAAKD,KAAL,CAAWC,EAAhB;AAAoBG,UAAAA,KAAK,EAAE,MAAKJ,KAAL,CAAWI,KAAtC;AAA6CC,UAAAA,WAAW,EAAE,MAAKL,KAAL,CAAWK,WAArE;AAAkFC,UAAAA,KAAK,EAAE,MAAKN,KAAL,CAAWO,YAApG;AAAkHC,UAAAA,WAAW,EAAG,MAAKR,KAAL,CAAWQ;AAA3I,SAAD,CAA9B,EAFG,CAGH;;AACD;;AACD,YAAKN,KAAL,CAAWC,QAAX,CAAoBZ,UAAU,EAA9B;;AACA,YAAKkB,QAAL,CAAc;AAAEC,QAAAA,KAAK,EAAE,KAAT;AAAgBN,QAAAA,KAAK,EAAE,EAAvB;AAA2BC,QAAAA,WAAW,EAAE,EAAxC;AAA4CM,QAAAA,MAAM,EAAE,EAApD;AAAwDH,QAAAA,WAAW,EAAG,KAAtE;AAA6EP,QAAAA,EAAE,EAAG;AAAlF,OAAd;AACD,KA7Ca;;AAAA,oEA+CE,UAAAH,KAAK,EAAI;AACvB,YAAKW,QAAL,CAAc;AAAEL,QAAAA,KAAK,EAAEN,KAAK,CAACc,MAAN,CAAaC;AAAtB,OAAd;AACD,KAjDa;;AAAA,mEAmDC,UAAAA,KAAK,EAAI;AACtB,YAAKJ,QAAL,CAAc;AAAEJ,QAAAA,WAAW,EAAEQ;AAAf,OAAd;AACD,KArDa;;AAAA,mEAuDC,UAAAf,KAAK,EAAI;AACtB,YAAKW,QAAL,CAAc;AAAEF,QAAAA,YAAY,EAAET,KAAK,CAACc,MAAN,CAAaE,KAAb,CAAmB,CAAnB,CAAhB;AACZN,QAAAA,WAAW,EAAG;AADF,OAAd;AAGD,KA3Da;;AAAA,6DA6DL,YAAM;AACb,YAAKC,QAAL,CAAc;AAAEL,QAAAA,KAAK,EAAE,EAAT;AAAaC,QAAAA,WAAW,EAAE,EAA1B;AAA8BM,QAAAA,MAAM,EAAE,EAAtC;AAA0CH,QAAAA,WAAW,EAAG,KAAxD;AAA+DP,QAAAA,EAAE,EAAG;AAApE,OAAd;;AACA,YAAKQ,QAAL,CAAc;AAAEC,QAAAA,KAAK,EAAE,CAAC,MAAKV,KAAL,CAAWU;AAArB,OAAd;AACD,KAhEa;;AAAA,6DAkEL,UAACZ,KAAD,EAAQiB,GAAR,EAAgB;AACvBjB,MAAAA,KAAK,CAACC,cAAN,GADuB,CAEvB;;AACAiB,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,UAAMG,QAAQ,GAAG,WAAjB;AACA,UAAMC,MAAM,GAAGJ,GAAG,CAACT,KAAnB;AACA,UAAIc,GAAG,GAAG,EAAV;;AACA,UAAGD,MAAM,IAAI,IAAb,EAAkB;AAChB,YAAME,GAAG,GAAG,IAAIC,MAAJ,CAAWH,MAAX,EAAmBI,QAAnB,CAA4B,QAA5B,CAAZ;AACAH,QAAAA,GAAG,kBAAWF,QAAX,qBAA8BG,GAA9B,CAAH;AACD;;AACD,YAAKZ,QAAL,CAAc;AACZR,QAAAA,EAAE,EAAGc,GAAG,CAACd,EADG;AAEZS,QAAAA,KAAK,EAAE,IAFK;AAGZF,QAAAA,WAAW,EAAG,KAHF;AAIZJ,QAAAA,KAAK,EAAEW,GAAG,CAACX,KAJC;AAKZC,QAAAA,WAAW,EAAEU,GAAG,CAACV,WALL;AAMZmB,QAAAA,MAAM,EAAGJ;AANG,OAAd;AAUD,KAvFa;;AAAA,+DAyFH,UAACtB,KAAD,EAAQG,EAAR,EAAe;AACxBH,MAAAA,KAAK,CAACC,cAAN;;AACA,UAAI0B,MAAM,CAACC,OAAP,CAAe,kBAAf,CAAJ,EAAwC;AACtC,cAAKxB,KAAL,CAAWC,QAAX,CAAoBR,UAAU,CAAC;AAACM,UAAAA,EAAE,EAAEA;AAAL,SAAD,CAA9B;AACD,OAJuB,CAKxB;;AACD,KA/Fa;;AAEZ,UAAKD,KAAL,GAAa;AACX2B,MAAAA,SAAS,EAAE,IADA;AAEXjB,MAAAA,KAAK,EAAE,KAFI;AAGXN,MAAAA,KAAK,EAAE,EAHI;AAIXC,MAAAA,WAAW,EAAE,EAJF;AAKXmB,MAAAA,MAAM,EAAG,IALE;AAMXjB,MAAAA,YAAY,EAAE,EANH;AAOXqB,MAAAA,OAAO,EAAE,KAPE;AAQXpB,MAAAA,WAAW,EAAG;AARH,KAAb;AAFY;AAYb;;;;wCAEmB;AAClB,WAAKN,KAAL,CAAWC,QAAX,CAAoBZ,UAAU,EAA9B;AACD;;;6BAiFQ;AAAA;;AAAA,wBACoD,KAAKW,KADzD;AAAA,UACC2B,KADD,eACCA,KADD;AAAA,UACQC,OADR,eACQA,OADR;AAAA,UACiBC,KADjB,eACiBA,KADjB;AAAA,UACwBJ,SADxB,eACwBA,SADxB;AAAA,UACmCK,IADnC,eACmCA,IADnC;AAAA,UACyCC,MADzC,eACyCA,MADzC;AAEPjB,MAAAA,OAAO,CAACC,GAAR,CAAYe,IAAZ;AACA,0BACE;AAAK,QAAA,SAAS,EAAE3C,CAAC,CAAC6C,IAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAY,QAAA,KAAK,EAAE;AAAEC,UAAAA,aAAa,EAAE;AAAjB,SAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,MAAD;AAAQ,QAAA,KAAK,EAAC,SAAd;AAAwB,QAAA,OAAO,EAAE,KAAKC,MAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EACgE,GADhE,CADF,CADF,eAME,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACCL,KAAK,CAACM,GAAN,CAAU,UAACL,IAAD;AAAA,4BACT,oBAAC,GAAD;AAAM,UAAA,KAAK,EAAE;AAAEG,YAAAA,aAAa,EAAE;AAAjB,WAAb;AAAuC,UAAA,EAAE,EAAE,CAA3C;AAA8C,UAAA,GAAG,EAAEH,IAAI,CAAC/B,EAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACA,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,OAAD;AAAS,UAAA,GAAG,MAAZ;AAAa,UAAA,KAAK,EAAC,MAAnB;AAA0B,UAAA,MAAM,EAAC,OAAjC;AAAyC,UAAA,GAAG,EAAG0B,SAAS,CAACW,IAAV,CAAe,UAAAC,CAAC;AAAA,mBAAIA,CAAC,CAACtC,EAAF,KAAS+B,IAAI,CAAC/B,EAAlB;AAAA,WAAhB,KAAyCuC,SAAzC,GAAsDb,SAAS,CAACW,IAAV,CAAe,UAAAC,CAAC;AAAA,mBAAIA,CAAC,CAACtC,EAAF,KAAS+B,IAAI,CAAC/B,EAAlB;AAAA,WAAhB,EAAsCmB,GAA5F,GAAkGqB,OAAO,CAAC,+BAAD,CAAxJ;AAA2L,UAAA,GAAG,EAAC,gBAA/L;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,eAEE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,SAAD;AAAW,UAAA,GAAG,EAAC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAqBT,IAAI,CAAC5B,KAA1B,CADF,eAEE,oBAAC,QAAD;AAAU,UAAA,KAAK,EAAE;AAAC,uBAAU,aAAX;AAAyB,wBAAW,OAApC;AAA4C,+BAAkB,GAA9D;AAAkE,+BAAkB,UAApF;AAA+F,wBAAW,QAA1G;AAAmH,4BAAe;AAAlI,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAgK;AAAK,UAAA,uBAAuB,EAAE;AAACsC,YAAAA,MAAM,EAAEV,IAAI,CAAC3B;AAAd,WAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAhK,CAFF,eAGE;AAAK,UAAA,KAAK,EAAE;AAACsC,YAAAA,cAAc,EAAE,eAAjB;AAAkCC,YAAAA,OAAO,EAAE;AAA3C,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAG,UAAA,OAAO,EAAE,iBAAA9C,KAAK;AAAA,mBAAI,MAAI,CAAC+C,MAAL,CAAY/C,KAAZ,EAAmBkC,IAAnB,CAAJ;AAAA,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA+C;AAAK,UAAA,GAAG,EAAES,OAAO,CAAC,uBAAD,CAAjB;AAA4C,UAAA,KAAK,EAAC,IAAlD;AAAuD,UAAA,MAAM,EAAC,IAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAA/C,CADF,eAEE;AAAG,UAAA,OAAO,EAAE,iBAAA3C,KAAK;AAAA,mBAAI,MAAI,CAACgD,QAAL,CAAchD,KAAd,EAAqBkC,IAAI,CAAC/B,EAA1B,CAAJ;AAAA,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAoD;AAAK,UAAA,GAAG,EAAEwC,OAAO,CAAC,yBAAD,CAAjB;AAA8C,UAAA,KAAK,EAAC,IAApD;AAAyD,UAAA,MAAM,EAAC,IAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAApD,CAFF,CAFF,CAHF,CAFF,CADA,CADS;AAAA,OAAV,CADD,CANF,eA0BE,oBAAC,KAAD;AAAO,QAAA,MAAM,EAAE,KAAKzC,KAAL,CAAWU,KAA1B;AAAiC,QAAA,MAAM,EAAE,KAAK0B,MAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,WAAD;AAAa,QAAA,MAAM,EAAE,KAAKA,MAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,KAAKpC,KAAL,CAAWC,EAAX,IAAiB,CAAjB,GAAqB,iBAArB,GAAyC,WAD1C,MADF,eAGE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAO,QAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAEE;AAAO,QAAA,SAAS,EAAC,cAAjB;AAAgC,QAAA,EAAE,EAAC,MAAnC;AAA2C,QAAA,KAAK,EAAG,KAAKD,KAAL,CAAWI,KAA9D;AAAqE,QAAA,QAAQ,EAAE,kBAACN,KAAD;AAAA,iBAAW,MAAI,CAACiD,aAAL,CAAmBjD,KAAnB,CAAX;AAAA,SAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADA,eAKE;AAAO,QAAA,OAAO,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBALF,eAME,oBAAC,UAAD;AAAY,QAAA,KAAK,EAAE,KAAKE,KAAL,CAAWK,WAA9B;AAA2C,QAAA,QAAQ,EAAE,KAAK2C,YAA1D;AAAwE,QAAA,KAAK,EAAE;AAACC,UAAAA,YAAY,EAAE,MAAf;AAAuBC,UAAAA,KAAK,EAAE;AAA9B,SAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANF,eAUE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAO,QAAA,OAAO,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,EAAE,EAAC,OAAtB;AAA8B,QAAA,QAAQ,EAAE,kBAACpD,KAAD;AAAA,iBAAW,MAAI,CAACqD,YAAL,CAAkBrD,KAAlB,CAAX;AAAA,SAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAVF,CAHF,eAkBE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,MAAD;AAAQ,QAAA,KAAK,EAAC,SAAd;AAAwB,QAAA,OAAO,EAAE,iBAACA,KAAD;AAAA,iBAAW,MAAI,CAACN,UAAL,CAAgBM,KAAhB,CAAX;AAAA,SAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAqE,KAAKE,KAAL,CAAWC,EAAX,IAAiB,CAAjB,GAAqB,QAArB,GAAgC,QAArG,CADF,EAC0H,GAD1H,eAEE,oBAAC,MAAD;AAAQ,QAAA,KAAK,EAAC,WAAd;AAA0B,QAAA,OAAO,EAAE,KAAKmC,MAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,CAlBF,CA1BF,CADF;AAoDD;;;6CArI+BgB,S,EAAWC,S,EAAW;AACpDrC,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;;AACA,UAAKmC,SAAS,CAACpB,IAAV,IAAkB,IAAlB,IAA0BqB,SAAS,CAACzB,OAAV,IAAqB,KAApD,EAA2D;AACzD,eAAO;AACLxB,UAAAA,KAAK,EAAEgD,SAAS,CAACpB,IAAV,CAAe5B,KADjB;AAELC,UAAAA,WAAW,EAAE+C,SAAS,CAACpB,IAAV,CAAe3B,WAFvB;AAGLuB,UAAAA,OAAO,EAAE;AAHJ,SAAP;AAKD,OARmD,CAUpD;;;AACA,aAAO,IAAP;AACD;;;;EAhCsB3D,KAAK,CAACqF,S;;AA4J/B,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAvD,KAAK;AAAA,SAAK;AAChC+B,IAAAA,KAAK,EAAE/B,KAAK,CAACgC,IAAN,CAAWwB,KADc;AAEhC7B,IAAAA,SAAS,EAAE3B,KAAK,CAACgC,IAAN,CAAWyB,GAFU;AAGhC3B,IAAAA,OAAO,EAAE9B,KAAK,CAACgC,IAAN,CAAWF,OAHY;AAIhCD,IAAAA,KAAK,EAAE7B,KAAK,CAACgC,IAAN,CAAWH,KAJc;AAKhCG,IAAAA,IAAI,EAAEhC,KAAK,CAACgC,IAAN,CAAWA,IALe;AAMhCC,IAAAA,MAAM,EAAEjC,KAAK,CAACgC,IAAN,CAAW0B;AANa,GAAL;AAAA,CAA7B;;AASA,eAAe1E,UAAU,CAACG,OAAO,CAACoE,eAAD,CAAP,CAAyB1D,UAAzB,CAAD,CAAzB","sourcesContent":["import React from \"react\";\r\nimport { Row, Col, Modal, ModalHeader, ModalBody, ModalFooter,  TableCard, Card, CardImg, CardText, CardBody, CardTitle, CardSubtitle, Button } from \"reactstrap\";\r\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport s from \"./Dashboard.module.scss\";\r\nimport Widget from \"../../components/Widget\";\r\nimport stocksImg from \"../../images/stocks.svg\";\r\nimport { fetchBlogs, createBlog, getBlog, updateBlog, deleteBlog } from \"../../actions/blog\";\r\nimport ReactQuill from 'react-quill';\r\n\r\nclass Counsellor extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      imageURLs: null,\r\n      modal: false,\r\n      title: '',\r\n      description: '',\r\n      imgUrl : null,\r\n      selectedFile: '',\r\n      editted: false,\r\n      updateImage : false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.dispatch(fetchBlogs());\r\n  }\r\n\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    console.log(\"state from props\");\r\n    if ( nextProps.blog != null && prevState.editted == false) {\r\n      return {\r\n        title: nextProps.blog.title,\r\n        description: nextProps.blog.description,\r\n        editted: true,\r\n      };\r\n    }\r\n\r\n    // Return null to indicate no change to state.\r\n    return null;\r\n  }\r\n\r\n  createBlog = (event) => {\r\n    event.preventDefault();\r\n    if(this.state.id == 0){\r\n      this.props.dispatch(createBlog({title: this.state.title, description: this.state.description, image: this.state.selectedFile}));\r\n      { /* window.location.reload();*/ }\r\n    }else{\r\n\r\n      this.props.dispatch(updateBlog({id: this.state.id, title: this.state.title, description: this.state.description, image: this.state.selectedFile, updateImage : this.state.updateImage}));\r\n      // window.location.reload();\r\n    }\r\n    this.props.dispatch(fetchBlogs());\r\n    this.setState({ modal: false, title: '', description: '', imgurl: '', updateImage : false, id : 0 })\r\n  }\r\n\r\n  onTitleChange = event => {\r\n    this.setState({ title: event.target.value})\r\n  }\r\n\r\n  onDescChange = value => {\r\n    this.setState({ description: value})\r\n  }\r\n\r\n  onFileChange = event => {\r\n    this.setState({ selectedFile: event.target.files[0],\r\n      updateImage : true\r\n    })\r\n  }\r\n\r\n  toggle = () => {\r\n    this.setState({ title: '', description: '', imgurl: '', updateImage : false, id : 0 })\r\n    this.setState({ modal: !this.state.modal})\r\n  }\r\n\r\n  onEdit = (event, val) => {\r\n    event.preventDefault();\r\n    // this.props.dispatch(getBlog({id: id}));\r\n    console.log(val)\r\n    const mimeType = 'image/png';\r\n    const buffer = val.image;\r\n    var url = ''\r\n    if(buffer != null){\r\n      const b64 = new Buffer(buffer).toString('base64')\r\n      url = `data:${mimeType};base64,${b64}`;\r\n    }\r\n    this.setState({\r\n      id : val.id,\r\n      modal: true,\r\n      updateImage : false,\r\n      title: val.title,\r\n      description: val.description,\r\n      imgUrl : url,\r\n    })\r\n\r\n\r\n  }\r\n\r\n  onDelete = (event, id) => {\r\n    event.preventDefault();\r\n    if (window.confirm(\"Delete the item?\")) {\r\n      this.props.dispatch(deleteBlog({id: id}));\r\n    }\r\n    // window.location.reload();\r\n  }\r\n\r\n  render() {\r\n    const { error, loading, blogs, imageURLs, blog, imgURL } = this.props;\r\n    console.log(blog);\r\n    return (\r\n      <div className={s.root}>\r\n        <Row>\r\n          <Col xl={4} style={{ paddingBottom: '10px' }}>\r\n            <Button color=\"primary\" onClick={this.toggle}>Create</Button>{' '}\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n        {blogs.map((blog) =>\r\n          <Col  style={{ paddingBottom: '10px'}} xl={4} key={blog.id}>\r\n          <Card>\r\n            <CardImg top width=\"100%\" height=\"270px\" src={ imageURLs.find(x => x.id === blog.id) != undefined ?  imageURLs.find(x => x.id === blog.id).url : require('../../images/blog_default.png')} alt=\"Card image cap\" />\r\n            <CardBody>\r\n              <CardTitle tag=\"h5\">{blog.title}</CardTitle>\r\n              <CardText style={{\"display\":\"-webkit-box\",\"maxWidth\":\"250px\",\"WebkitLineClamp\":\"3\",\"WebkitBoxOrient\":\"vertical\",\"overflow\":\"hidden\",\"textOverflow\":\"ellipsis\"}}><div dangerouslySetInnerHTML={{__html: blog.description}}></div></CardText>\r\n              <div style={{justifyContent: 'space-between', display: 'flex'}}>\r\n                { /* <Button>Read more..</Button> */}\r\n                <div>\r\n                  <a onClick={event => this.onEdit(event, blog)}><img src={require(\"../../images/edit.png\")} width=\"20\" height=\"25\"/></a>\r\n                  <a onClick={event => this.onDelete(event, blog.id)}><img src={require(\"../../images/delete.png\")} width=\"40\" height=\"25\"/></a>\r\n                </div>\r\n              </div>\r\n            </CardBody>\r\n          </Card>\r\n          </Col>\r\n        ) }\r\n        </Row>\r\n        <Modal isOpen={this.state.modal} toggle={this.toggle} >\r\n          <ModalHeader toggle={this.toggle}>\r\n          {this.state.id == 0 ? 'Create New Blog' : 'Edit Blog'} </ModalHeader>\r\n          <ModalBody>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"name\">Title</label>\r\n            <input className=\"form-control\" id=\"name\"  value={ this.state.title} onChange={(event) => this.onTitleChange(event)}/>\r\n          </div>\r\n            <label htmlFor=\"des\">description</label>\r\n            <ReactQuill value={this.state.description} onChange={this.onDescChange} style={{marginBottom: '35px', width: '100%'}}/>\r\n            { /*this.state.imgUrl != null || this.state.imgUrl != '' ?\r\n              <img src={this.state.imgUrl} width=\"100\" height=\"100\" />\r\n            : '' */}\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"image\">Image : </label>\r\n              <input type=\"file\" id=\"image\" onChange={(event) => this.onFileChange(event)}/>\r\n            </div>\r\n            </ModalBody>\r\n          <ModalFooter>\r\n            <Button color=\"primary\" onClick={(event) => this.createBlog(event)}>{this.state.id == 0 ? 'Create' : 'Update'}</Button>{' '}\r\n            <Button color=\"secondary\" onClick={this.toggle}>Cancel</Button>\r\n        </ModalFooter>\r\n      </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  blogs: state.blog.items,\r\n  imageURLs: state.blog.ary,\r\n  loading: state.blog.loading,\r\n  error: state.blog.error,\r\n  blog: state.blog.blog,\r\n  imgURL: state.blog.ary_url\r\n});\r\n\r\nexport default withRouter(connect(mapStateToProps)(Counsellor));\r\n"]},"metadata":{},"sourceType":"module"}