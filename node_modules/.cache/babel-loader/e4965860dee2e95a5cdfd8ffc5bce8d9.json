{"ast":null,"code":"import _toConsumableArray from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _defineProperty from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\src\\\\pages\\\\billing\\\\Billing.js\";\nimport React from \"react\";\nimport { Row, Col, Modal, ModalHeader, ModalBody, ModalFooter, Table, Button, Input, Badge, Pagination, PaginationItem, PaginationLink } from \"reactstrap\";\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport s from \"./Dashboard.module.scss\";\nimport Widget from \"../../components/Widget/Widget\";\nimport { fetchAppoinment } from \"../../actions/appoinment\";\nimport { fetchOrderedProgram, getAllPrograms, updateProgram, createProgram, deleteProgram } from \"../../actions/program\";\nimport { fetchTests, fetchPaidTests } from \"../../actions/test\";\nimport { fetchOrderedBilling, fetchService } from \"../../actions/billing\";\nimport { fetchOfflineUsers, fetchDoctors } from \"../../actions/user\";\nimport { toast, ToastContainer } from 'react-toastify';\nimport Swal from 'sweetalert2'; // import generatePDF from \"../../services/reportGenerator\";\n// import jsPDF from \"jspdf\";\n// import \"jspdf-autotable\";\n\nvar Billing = /*#__PURE__*/function (_React$Component) {\n  _inherits(Billing, _React$Component);\n\n  function Billing(props) {\n    var _this;\n\n    _classCallCheck(this, Billing);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Billing).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onEdit\", function (event, row) {\n      event.preventDefault();\n\n      _this.setState({\n        user: 0,\n        test: 0\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDelete\", function (event, id) {\n      event.preventDefault();\n\n      if (window.confirm(\"Delete the item?\")) {\n        _this.props.dispatch(deleteProgram({\n          id: id\n        }));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"get_user_name\", function (condition) {\n      var fname = '';\n\n      _this.props.users.filter(function (e) {\n        return e.id === condition;\n      }).map(function (key, i) {\n        return fname = key.first_name + \" \" + key.last_name;\n      });\n\n      return fname;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"get_program_name\", function (condition) {\n      var fname = '';\n\n      _this.props.allProgram.filter(function (e) {\n        return e.id === condition;\n      }).map(function (key, i) {\n        return fname = key.title;\n      });\n\n      return fname;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"get_test_name\", function (condition) {\n      var fname = '';\n\n      _this.props.tests.filter(function (e) {\n        return e.id === condition;\n      }).map(function (key, i) {\n        return fname = key.name;\n      });\n\n      return fname;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"get_paid_tests_name\", function (condition) {\n      var fname = '';\n\n      _this.props.paid_tests.filter(function (e) {\n        return e.id === condition;\n      }).map(function (key, i) {\n        return fname = key.name;\n      });\n\n      return fname;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"get_service_name\", function (condition) {\n      var fname = '';\n\n      _this.props.allServices.filter(function (e) {\n        return e.id === condition;\n      }).map(function (key, i) {\n        return fname = key.title;\n      });\n\n      return fname;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"get_doctor_name\", function (condition) {\n      var fname = '';\n\n      _this.props.doctors.filter(function (e) {\n        return e.id === condition;\n      }).map(function (key, i) {\n        return fname = key.first_name + \" \" + key.last_name;\n      });\n\n      return fname;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"pdf\", function (event, row) {// var ary=[{question: 'ANB', answer: 'A'}]\n      // generatePDF(ary)\n    });\n\n    _this.pageSize = 20;\n    _this.pagesCount = Math.ceil(_this.props.ordered_billings.length / _this.pageSize);\n    _this.state = {\n      currentPage: 0,\n      pageSize: 20,\n      pagesCount: 0\n    };\n    return _this;\n  }\n\n  _createClass(Billing, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.props.dispatch(fetchOrderedProgram());\n      this.props.dispatch(getAllPrograms());\n      this.props.dispatch(fetchOfflineUsers());\n      this.props.dispatch(fetchAppoinment());\n      this.props.dispatch(fetchDoctors());\n      this.props.dispatch(fetchOrderedBilling());\n      this.props.dispatch(fetchTests());\n      this.props.dispatch(fetchPaidTests());\n      this.props.dispatch(fetchService());\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {// var num = Math.ceil(this.props.ordered_billings.length / this.state.pageSize)\n      // console.log(\"num\",num)\n      // this.setState({\n      //   pagesCount :num\n      // })\n    }\n  }, {\n    key: \"onDropdownSetStateName\",\n    value: function onDropdownSetStateName(e) {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(e, index) {\n      e.preventDefault();\n      this.setState({\n        currentPage: index\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var currentPage = this.state.currentPage;\n      var pagesCount = Math.ceil(this.props.ordered_billings.length / this.state.pageSize);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: s.root,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(ToastContainer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xl: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }\n      }, this.props.ordered_billings.length > 0 ? /*#__PURE__*/React.createElement(Widget, {\n        title: /*#__PURE__*/React.createElement(\"p\", {\n          style: {\n            fontWeight: 700\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 22\n          }\n        }, \"Billing\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Table, {\n        responsive: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        className: \"fs-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        className: \"hidden-sm-down\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }\n      }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"hidden-sm-down\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }\n      }, \"Programe\"), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"hidden-sm-down\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }\n      }, \"Patient\"), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"hidden-sm-down\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }\n      }, \"Amount\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 17\n        }\n      }, this.props.ordered_billings.slice(currentPage * this.state.pageSize, (currentPage + 1) * this.state.pageSize).map(function (row, i) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          style: {\n            cursor: 'pointer'\n          },\n          key: i,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 23\n          }\n        }, row.id), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 23\n          }\n        }, row.programID !== null ? _this2.get_program_name(row.programID) : row.programID, row.testID !== null ? _this2.get_test_name(row.testID) : _this2.get_paid_tests_name(row.testID) != '' ? _this2.get_paid_tests_name(row.testID) : row.testID, row.serviceID !== null ? _this2.get_service_name(row.serviceID) : row.testID), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 23\n          }\n        }, _this2.get_user_name(row.userID)), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 23\n          }\n        }, row.amount > 0 ? /*#__PURE__*/React.createElement(Badge, {\n          color: \"success\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 23\n          }\n        }, row.amount) : /*#__PURE__*/React.createElement(Badge, {\n          color: \"danger\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 23\n          }\n        }, row.amount)), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          onClick: function onClick(event) {\n            return _this2.pdf(event, row);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 25\n          }\n        }, \"Generate PDF\")));\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pagination-wrapper\",\n        style: {\n          float: 'right',\n          fontSize: '20px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Pagination, {\n        \"aria-label\": \"Page navigation example\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(PaginationItem, {\n        disabled: currentPage <= 0,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(PaginationLink, {\n        onClick: function onClick(e) {\n          return _this2.handleClick(e, currentPage - 1);\n        },\n        previous: true,\n        href: \"#\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 21\n        }\n      })), _toConsumableArray(Array(pagesCount)).map(function (page, i) {\n        return /*#__PURE__*/React.createElement(PaginationItem, {\n          active: i === currentPage,\n          key: i,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(PaginationLink, {\n          onClick: function onClick(e) {\n            return _this2.handleClick(e, i);\n          },\n          href: \"#\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 23\n          }\n        }, i + 1));\n      }), /*#__PURE__*/React.createElement(PaginationItem, {\n        disabled: currentPage >= pagesCount - 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(PaginationLink, {\n        onClick: function onClick(e) {\n          return _this2.handleClick(e, currentPage + 1);\n        },\n        next: true,\n        href: \"#\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }\n      }))))) : /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontWeight: 700\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 15\n        }\n      }, \"NO DATA FOUND\"))));\n    }\n  }]);\n\n  return Billing;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    tests: state.test.tests,\n    paid_tests: state.test.paid_tests,\n    users: state.auth.offline_users,\n    doctors: state.auth.doctors,\n    appoinments: state.appoinment.appoinments,\n    appoinment: state.appoinment.appoinment,\n    ordered_programs: state.program.ordered_programs,\n    program: state.program.program,\n    allProgram: state.program.allProgram,\n    ordered_billings: state.billing.ordered_billings,\n    allServices: state.billing.allServices\n  };\n};\n\nexport default withRouter(connect(mapStateToProps)(Billing));","map":{"version":3,"sources":["D:/30-12/setup 2 new/final file/src/pages/billing/Billing.js"],"names":["React","Row","Col","Modal","ModalHeader","ModalBody","ModalFooter","Table","Button","Input","Badge","Pagination","PaginationItem","PaginationLink","withRouter","Redirect","Link","connect","axios","s","Widget","fetchAppoinment","fetchOrderedProgram","getAllPrograms","updateProgram","createProgram","deleteProgram","fetchTests","fetchPaidTests","fetchOrderedBilling","fetchService","fetchOfflineUsers","fetchDoctors","toast","ToastContainer","Swal","Billing","props","event","row","preventDefault","setState","user","test","id","window","confirm","dispatch","condition","fname","users","filter","e","map","key","i","first_name","last_name","allProgram","title","tests","name","paid_tests","allServices","doctors","pageSize","pagesCount","Math","ceil","ordered_billings","length","state","currentPage","target","value","index","root","fontWeight","slice","cursor","programID","get_program_name","testID","get_test_name","get_paid_tests_name","serviceID","get_service_name","get_user_name","userID","amount","pdf","float","fontSize","handleClick","Array","page","Component","mapStateToProps","auth","offline_users","appoinments","appoinment","ordered_programs","program","billing"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Row, Col, Modal, ModalHeader, ModalBody, ModalFooter,  Table, Button, Input, Badge, Pagination, PaginationItem, PaginationLink   } from \"reactstrap\";\r\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport s from \"./Dashboard.module.scss\";\r\nimport Widget from \"../../components/Widget/Widget\";\r\nimport { fetchAppoinment } from \"../../actions/appoinment\";\r\nimport { fetchOrderedProgram,getAllPrograms, updateProgram, createProgram, deleteProgram } from \"../../actions/program\";\r\nimport { fetchTests, fetchPaidTests } from \"../../actions/test\";\r\nimport { fetchOrderedBilling,fetchService } from \"../../actions/billing\";\r\nimport { fetchOfflineUsers,fetchDoctors } from \"../../actions/user\";\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport Swal from 'sweetalert2';\r\n// import generatePDF from \"../../services/reportGenerator\";\r\n// import jsPDF from \"jspdf\";\r\n// import \"jspdf-autotable\";\r\n\r\nclass Billing extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.pageSize = 20;\r\n    this.pagesCount = Math.ceil(this.props.ordered_billings.length / this.pageSize);\r\n    this.state = {\r\n\r\n      currentPage: 0,\r\n      pageSize : 20,\r\n      pagesCount :  0\r\n\r\n    };\r\n\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.props.dispatch(fetchOrderedProgram());\r\n    this.props.dispatch(getAllPrograms());\r\n    this.props.dispatch(fetchOfflineUsers());\r\n    this.props.dispatch(fetchAppoinment());\r\n    this.props.dispatch(fetchDoctors());\r\n    this.props.dispatch(fetchOrderedBilling());\r\n    this.props.dispatch(fetchTests());\r\n    this.props.dispatch(fetchPaidTests());\r\n    this.props.dispatch(fetchService());\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n\r\n    // var num = Math.ceil(this.props.ordered_billings.length / this.state.pageSize)\r\n    // console.log(\"num\",num)\r\n    // this.setState({\r\n    //   pagesCount :num\r\n    // })\r\n  }\r\n\r\n  onEdit = (event, row) => {\r\n    event.preventDefault();\r\n    this.setState({\r\n      user: 0,\r\n      test: 0,\r\n    })\r\n  }\r\n\r\n  onDelete = (event, id) => {\r\n    event.preventDefault();\r\n    if (window.confirm(\"Delete the item?\")) {\r\n      this.props.dispatch(deleteProgram({id: id}));\r\n    }\r\n  }\r\n\r\n   onDropdownSetStateName(e) {\r\n     this.setState({[e.target.name]: e.target.value})\r\n   }\r\n\r\n\r\n  get_user_name = (condition) => {\r\n    let fname = '';\r\n      this.props.users.filter((e) => e.id === condition).map((key, i) => (\r\n        fname = key.first_name + \" \" + key.last_name\r\n      ))\r\n    return fname\r\n    };\r\n\r\n    get_program_name = (condition) => {\r\n      let fname = '';\r\n        this.props.allProgram.filter((e) => e.id === condition).map((key, i) => (\r\n          fname = key.title\r\n        ))\r\n      return fname\r\n      };\r\n\r\n      get_test_name = (condition) => {\r\n      let fname = '';\r\n        this.props.tests.filter((e) => e.id === condition).map((key, i) => (\r\n          fname = key.name\r\n        ))\r\n      return fname\r\n      };\r\n\r\n      get_paid_tests_name = (condition) => {\r\n        let fname = '';\r\n          this.props.paid_tests.filter((e) => e.id === condition).map((key, i) => (\r\n            fname = key.name\r\n          ))\r\n        return fname\r\n        };\r\n\r\n        get_service_name = (condition) => {\r\n          let fname = '';\r\n            this.props.allServices.filter((e) => e.id === condition).map((key, i) => (\r\n              fname = key.title\r\n            ))\r\n          return fname\r\n          };\r\n\r\n\r\n\r\n  get_doctor_name = (condition) => {\r\n    let fname = '';\r\n      this.props.doctors.filter((e) => e.id === condition).map((key, i) => (\r\n        fname = key.first_name + \" \" + key.last_name\r\n      ))\r\n    return fname\r\n    };\r\n\r\n\r\n  handleClick(e, index) {\r\n\r\n    e.preventDefault();\r\n\r\n    this.setState({\r\n      currentPage: index\r\n    });\r\n\r\n  }\r\n\r\n  pdf = (event, row) => {\r\n    \r\n    // var ary=[{question: 'ANB', answer: 'A'}]\r\n    // generatePDF(ary)\r\n  }\r\n\r\n  render() {\r\n    const { currentPage } = this.state;\r\n    var pagesCount = Math.ceil(this.props.ordered_billings.length / this.state.pageSize)\r\n\r\n    return (\r\n      <div className={s.root}>\r\n      <ToastContainer />\r\n        <Row>\r\n          <Col xl={12} >\r\n          {this.props.ordered_billings.length >0 ?\r\n            <Widget\r\n              title={<p style={{ fontWeight: 700 }}>Billing</p>}\r\n            >\r\n              <Table responsive>\r\n                <thead>\r\n                  <tr className=\"fs-sm\">\r\n                    <th className=\"hidden-sm-down\">#</th>\r\n                    <th className=\"hidden-sm-down\">Programe</th>\r\n                    <th className=\"hidden-sm-down\">Patient</th>\r\n                    <th className=\"hidden-sm-down\">Amount</th>\r\n                    {/* <th /> */}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n\r\n                {this.props.ordered_billings\r\n                  .slice(\r\n                    currentPage * this.state.pageSize,\r\n                    (currentPage + 1) * this.state.pageSize\r\n                  )\r\n                  .map((row, i) =>\r\n                    <tr style={{cursor: 'pointer'}}  key={i}  >\r\n                      <td >{row.id}</td>\r\n                      <td  >\r\n                        {\r\n                          row.programID !== null\r\n                          ?\r\n                          this.get_program_name(row.programID)\r\n                          :\r\n                          row.programID\r\n                        }\r\n                        {\r\n                          row.testID !== null\r\n                          ?\r\n                          this.get_test_name(row.testID)\r\n                          :\r\n                            this.get_paid_tests_name(row.testID) != ''\r\n                            ?\r\n                            this.get_paid_tests_name(row.testID)\r\n                            :\r\n                            row.testID\r\n                        }\r\n\r\n                        {\r\n                          row.serviceID !== null\r\n                          ?\r\n                          this.get_service_name(row.serviceID)\r\n                          :\r\n                          row.testID\r\n                        }\r\n\r\n                      </td>\r\n                      <td  >\r\n                        {this.get_user_name(row.userID)}\r\n                      </td>\r\n                      <td  >\r\n                      {\r\n                      row.amount > 0\r\n                      ?\r\n                      <Badge color=\"success\">{row.amount}</Badge>\r\n                      :\r\n                      <Badge color=\"danger\">{row.amount}</Badge>\r\n                      }\r\n                      </td>\r\n                      <td>\r\n                        <a onClick={event => this.pdf(event, row)}>Generate PDF</a>\r\n                      </td>\r\n                      {/* <td>\r\n                        <a onClick={event => this.onEdit(event, row)}><img src={require(\"../../images/edit.png\")} width=\"20\" height=\"25\" /></a>\r\n\r\n                      </td> */}\r\n                    </tr>\r\n\r\n                  )}\r\n                </tbody>\r\n              </Table>\r\n\r\n              <div className=\"pagination-wrapper\" style={{float: 'right',fontSize: '20px'}} >\r\n\r\n                <Pagination aria-label=\"Page navigation example\">\r\n\r\n                  <PaginationItem disabled={currentPage <= 0}>\r\n\r\n                    <PaginationLink\r\n                      onClick={e => this.handleClick(e, currentPage - 1)}\r\n                      previous\r\n                      href=\"#\"\r\n                    />\r\n\r\n                  </PaginationItem>\r\n\r\n                  {[...Array(pagesCount)].map((page, i) =>\r\n                    <PaginationItem active={i === currentPage} key={i}>\r\n                      <PaginationLink onClick={e => this.handleClick(e, i)} href=\"#\">\r\n                        {i + 1}\r\n                      </PaginationLink>\r\n                    </PaginationItem>\r\n                  )}\r\n\r\n                  <PaginationItem disabled={currentPage >= pagesCount - 1}>\r\n\r\n                    <PaginationLink\r\n                      onClick={e => this.handleClick(e, currentPage + 1)}\r\n                      next\r\n                      href=\"#\"\r\n                    />\r\n\r\n                  </PaginationItem>\r\n\r\n                </Pagination>\r\n\r\n              </div>\r\n            </Widget>\r\n            : <p style={{ fontWeight: 700 }}>NO DATA FOUND</p> }\r\n          </Col>\r\n        </Row>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  tests: state.test.tests,\r\n  paid_tests: state.test.paid_tests,\r\n  users : state.auth.offline_users,\r\n  doctors : state.auth.doctors,\r\n  appoinments : state.appoinment.appoinments,\r\n  appoinment : state.appoinment.appoinment,\r\n  ordered_programs : state.program.ordered_programs,\r\n  program : state.program.program,\r\n  allProgram : state.program.allProgram,\r\n  ordered_billings  : state.billing.ordered_billings,\r\n  allServices : state.billing.allServices\r\n\r\n\r\n});\r\n\r\nexport default withRouter(connect(mapStateToProps)(Billing));\r\n"]},"metadata":{},"sourceType":"module"}