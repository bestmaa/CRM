{"ast":null,"code":"import _toConsumableArray from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport { EDIT_FALSE, LOGIN_SUCCESS, LOGIN_FAILURE, LOGOUT_SUCCESS, CREATE_USER_SUCCESS, CREATE_USER_FAILURE, FETCH_USERS_SUCCESS, FETCH_USERS_FAILURE, FETCH_USER_SUCCESS, FETCH_USER_FAILURE, UPDATE_USER_SUCCESS, UPDATE_USER_FAILURE, DELETE_USER_SUCCESS, DELETE_USER_FAILURE, FETCH_OFFLINE_USERS_SUCCESS, FETCH_DOCTORS_USERS_SUCCESS } from '../actions/user';\nvar authenticated = localStorage.getItem('authenticated');\nexport default function auth() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    users: [],\n    offline_users: [],\n    doctors: [],\n    user: null,\n    error: null,\n    edit: false,\n    isFetching: false,\n    isAuthenticated: authenticated\n  };\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case LOGIN_SUCCESS:\n      return Object.assign({}, state, {\n        isFetching: false,\n        isAuthenticated: true,\n        errorMessage: ''\n      });\n\n    case LOGIN_FAILURE:\n      return Object.assign({}, state, {\n        isFetching: false,\n        isAuthenticated: false,\n        errorMessage: action.payload\n      });\n\n    case LOGOUT_SUCCESS:\n      return Object.assign({}, state, {\n        isAuthenticated: false\n      });\n\n    case CREATE_USER_SUCCESS:\n      console.log(\"create success\", action.payload.user);\n      return Object.assign({}, state, {\n        users: [].concat(_toConsumableArray(state.users), [action.payload.user])\n      });\n\n    case CREATE_USER_FAILURE:\n      return Object.assign({}, state, {});\n\n    case UPDATE_USER_SUCCESS:\n      var index = state.users.findIndex(function (o) {\n        if (o.id === action.payload.user.id) {\n          o.first_name = action.payload.user.first_name;\n          o.last_name = action.payload.user.last_name;\n          o.number = action.payload.user.number;\n          o.email = action.payload.user.email;\n        }\n      });\n      return Object.assign({}, state, {\n        user: null,\n        users: state.users,\n        edit: true\n      });\n\n    case UPDATE_USER_FAILURE:\n      return Object.assign({}, state, {});\n\n    case FETCH_USERS_SUCCESS:\n      return Object.assign({}, state, {\n        users: action.payload.users\n      });\n\n    case FETCH_OFFLINE_USERS_SUCCESS:\n      return Object.assign({}, state, {\n        offline_users: action.payload.all_users\n      });\n\n    case FETCH_DOCTORS_USERS_SUCCESS:\n      return Object.assign({}, state, {\n        doctors: action.payload.doctors\n      });\n\n    case FETCH_USERS_SUCCESS:\n      return Object.assign({}, state, {});\n\n    case FETCH_USER_SUCCESS:\n      return Object.assign({}, state, {\n        user: action.payload.user,\n        edit: true\n      });\n\n    case FETCH_USER_FAILURE:\n      return Object.assign({}, state, {});\n\n    case DELETE_USER_SUCCESS:\n      // var index = state.users.findIndex(function(o){\n      //      return o.id === parseInt(action.payload.user_id)\n      // })\n      return Object.assign({}, state, {\n        users: _toConsumableArray(state.users.filter(function (a) {\n          return a.id !== parseInt(action.payload.user_id);\n        }))\n      });\n\n    case DELETE_USER_FAILURE:\n      return Object.assign({}, state, {});\n\n    case EDIT_FALSE:\n      return Object.assign({}, state, {\n        edit: false\n      });\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["D:/30-12/setup 2 new/final file/src/reducers/auth.js"],"names":["EDIT_FALSE","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT_SUCCESS","CREATE_USER_SUCCESS","CREATE_USER_FAILURE","FETCH_USERS_SUCCESS","FETCH_USERS_FAILURE","FETCH_USER_SUCCESS","FETCH_USER_FAILURE","UPDATE_USER_SUCCESS","UPDATE_USER_FAILURE","DELETE_USER_SUCCESS","DELETE_USER_FAILURE","FETCH_OFFLINE_USERS_SUCCESS","FETCH_DOCTORS_USERS_SUCCESS","authenticated","localStorage","getItem","auth","state","users","offline_users","doctors","user","error","edit","isFetching","isAuthenticated","action","type","Object","assign","errorMessage","payload","console","log","index","findIndex","o","id","first_name","last_name","number","email","all_users","filter","a","parseInt","user_id"],"mappings":"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","sourcesContent":["import {\r\n    EDIT_FALSE, LOGIN_SUCCESS, LOGIN_FAILURE, LOGOUT_SUCCESS, CREATE_USER_SUCCESS, CREATE_USER_FAILURE, FETCH_USERS_SUCCESS, FETCH_USERS_FAILURE, FETCH_USER_SUCCESS, FETCH_USER_FAILURE, UPDATE_USER_SUCCESS, UPDATE_USER_FAILURE, DELETE_USER_SUCCESS, DELETE_USER_FAILURE, FETCH_OFFLINE_USERS_SUCCESS, FETCH_DOCTORS_USERS_SUCCESS\r\n} from '../actions/user';\r\n\r\nconst authenticated = localStorage.getItem('authenticated');\r\nexport default function auth(state = {\r\n    users: [],\r\n    offline_users: [],\r\n    doctors : [],\r\n    user: null,\r\n    error: null,\r\n    edit: false,\r\n    isFetching: false,\r\n    isAuthenticated: authenticated,\r\n}, action) {\r\n    switch (action.type) {\r\n        case LOGIN_SUCCESS:\r\n            return Object.assign({}, state, {\r\n                isFetching: false,\r\n                isAuthenticated: true,\r\n                errorMessage: '',\r\n            });\r\n\r\n        case LOGIN_FAILURE:\r\n            return Object.assign({}, state, {\r\n                isFetching: false,\r\n                isAuthenticated: false,\r\n                errorMessage: action.payload,\r\n            });\r\n\r\n        case LOGOUT_SUCCESS:\r\n            return Object.assign({}, state, {\r\n                isAuthenticated: false,\r\n            });\r\n\r\n        case CREATE_USER_SUCCESS:\r\n          console.log(\"create success\", action.payload.user);\r\n            return Object.assign({}, state, {\r\n                users: [...state.users, action.payload.user]\r\n            });\r\n\r\n        case CREATE_USER_FAILURE:\r\n            return Object.assign({}, state, {\r\n            });\r\n\r\n        case UPDATE_USER_SUCCESS:\r\n          var index = state.users.findIndex(function(o){\r\n               if (o.id === action.payload.user.id){\r\n                 o.first_name = action.payload.user.first_name\r\n                 o.last_name = action.payload.user.last_name\r\n                 o.number = action.payload.user.number\r\n                 o.email = action.payload.user.email\r\n               }\r\n          })\r\n            return Object.assign({}, state, {\r\n                user: null,\r\n                users: state.users,\r\n                edit: true\r\n            });\r\n        case UPDATE_USER_FAILURE:\r\n            return Object.assign({}, state, {\r\n            });\r\n\r\n        case FETCH_USERS_SUCCESS:\r\n            return Object.assign({}, state, {\r\n                users: action.payload.users,\r\n            });\r\n\r\n        case FETCH_OFFLINE_USERS_SUCCESS:\r\n            return Object.assign({}, state, {\r\n                offline_users: action.payload.all_users,\r\n            });\r\n\r\n        case FETCH_DOCTORS_USERS_SUCCESS:\r\n            return Object.assign({}, state, {\r\n                doctors: action.payload.doctors,\r\n            });\r\n\r\n\r\n        case FETCH_USERS_SUCCESS:\r\n            return Object.assign({}, state, {\r\n                });\r\n\r\n        case FETCH_USER_SUCCESS:\r\n            return Object.assign({}, state, {\r\n                user: action.payload.user,\r\n                edit: true\r\n            });\r\n\r\n        case FETCH_USER_FAILURE:\r\n            return Object.assign({}, state, {\r\n            });\r\n\r\n        case DELETE_USER_SUCCESS:\r\n          // var index = state.users.findIndex(function(o){\r\n          //      return o.id === parseInt(action.payload.user_id)\r\n          // })\r\n          return Object.assign({}, state, {\r\n            users: [...state.users.filter(a=>a.id !==  parseInt(action.payload.user_id))]\r\n          });\r\n\r\n        case DELETE_USER_FAILURE:\r\n            return Object.assign({}, state, {\r\n            });\r\n\r\n        case EDIT_FALSE:\r\n            return Object.assign({}, state, {\r\n                edit: false\r\n            });\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}