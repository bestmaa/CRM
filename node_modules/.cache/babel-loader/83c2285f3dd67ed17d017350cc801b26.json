{"ast":null,"code":"import _classCallCheck from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _defineProperty from \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\30-12\\\\setup 2 new\\\\final file\\\\src\\\\pages\\\\payment\\\\Payment.js\";\nimport React from \"react\";\nimport { Row, Col, Modal, ModalHeader, ModalBody, ModalFooter, Table, Button, Form, FormGroup, Label, Input, Badge, Pagination, PaginationItem, PaginationLink } from \"reactstrap\";\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport config from \"../../config.js\";\nimport s from \"./Dashboard.module.scss\";\nimport Widget from \"../../components/Widget/Widget\";\nimport { fetchAppoinment } from \"../../actions/appoinment\";\nimport { fetchOrderedProgram, getAllPrograms, deleteProgram } from \"../../actions/program\";\nimport { fetchTests, fetchPaidTests } from \"../../actions/test\";\nimport { fetchOrderedBilling, fetchService, fetchRemainingBillPatientList, getBillNumber, createBill } from \"../../actions/billing\";\nimport { fetchOfflineUsers, fetchDoctors } from \"../../actions/user\";\nimport { toast, ToastContainer } from 'react-toastify';\nimport Swal from 'sweetalert2';\n\nvar Payment = /*#__PURE__*/function (_React$Component) {\n  _inherits(Payment, _React$Component);\n\n  function Payment(props) {\n    var _this;\n\n    _classCallCheck(this, Payment);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Payment).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onEdit\", function (event, row) {\n      event.preventDefault();\n\n      _this.setState({\n        user: 0,\n        test: 0\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDelete\", function (event, id) {\n      event.preventDefault();\n\n      if (window.confirm(\"Delete the item?\")) {\n        _this.props.dispatch(deleteProgram({\n          id: id\n        }));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"get_user_name\", function (condition) {\n      var fname = '';\n\n      _this.props.users.filter(function (e) {\n        return e.id === condition;\n      }).map(function (key, i) {\n        return fname = key.first_name + \" \" + key.last_name;\n      });\n\n      return fname;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"get_program_name\", function (condition) {\n      var fname = '';\n\n      _this.props.allProgram.filter(function (e) {\n        return e.id === condition;\n      }).map(function (key, i) {\n        return fname = key.title;\n      });\n\n      return fname;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"get_test_name\", function (condition) {\n      var fname = '';\n\n      _this.props.tests.filter(function (e) {\n        return e.id === condition;\n      }).map(function (key, i) {\n        return fname = key.name;\n      });\n\n      return fname;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"get_paid_tests_name\", function (condition) {\n      var fname = '';\n\n      _this.props.paid_tests.filter(function (e) {\n        return e.id === condition;\n      }).map(function (key, i) {\n        return fname = key.name;\n      });\n\n      return fname;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"get_service_name\", function (condition) {\n      var fname = '';\n\n      _this.props.allServices.filter(function (e) {\n        return e.id === condition;\n      }).map(function (key, i) {\n        return fname = key.title;\n      });\n\n      return fname;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"get_doctor_name\", function (condition) {\n      var fname = '';\n\n      _this.props.doctors.filter(function (e) {\n        return e.id === condition;\n      }).map(function (key, i) {\n        return fname = key.first_name + \" \" + key.last_name;\n      });\n\n      return fname;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"createSelectItemsPatients\", function (val) {\n      var items = [];\n      items.push( /*#__PURE__*/React.createElement(\"option\", {\n        key: 0,\n        value: \"\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 16\n        }\n      }, \"Select Patients\"));\n\n      for (var i = 0; i < _this.props.remaining_bill_patients.length; i++) {\n        //console.log(i);\n        items.push( /*#__PURE__*/React.createElement(\"option\", {\n          key: _this.props.remaining_bill_patients[i].id,\n          value: _this.props.remaining_bill_patients[i].id,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 19\n          }\n        }, _this.props.remaining_bill_patients[i].first_name, \" \", _this.props.doctors[i].last_name));\n      }\n\n      return items;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getPatients\", function () {\n      var items = [];\n      items.push( /*#__PURE__*/React.createElement(\"option\", {\n        key: -1,\n        value: \"\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 16\n        }\n      }, \"Select Patients\"));\n\n      for (var i = 0; i < _this.props.remaining_bill_patients.length; i++) {\n        //console.log(i);\n        if (_this.props.remaining_bill_patients[i].userID != 0 && _this.props.remaining_bill_patients[i].amount != _this.props.remaining_bill_patients[i].totalAmount) items.push( /*#__PURE__*/React.createElement(\"option\", {\n          key: _this.props.remaining_bill_patients[i].id,\n          value: _this.props.remaining_bill_patients[i].userID,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 19\n          }\n        }, _this.get_user_name(_this.props.remaining_bill_patients[i].userID)));\n      }\n\n      return items;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getBillingNumber\", function () {\n      var items = [];\n      items.push( /*#__PURE__*/React.createElement(\"option\", {\n        key: 0,\n        value: \"\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 16\n        }\n      }, \"Select Bill\"));\n\n      for (var i = 0; i < _this.props.bill_numbers.length; i++) {\n        //console.log(i);\n        if (_this.props.bill_numbers[i].id != 0 && _this.props.bill_numbers[i].amount != _this.props.bill_numbers[i].totalAmount) items.push( /*#__PURE__*/React.createElement(\"option\", {\n          key: _this.props.bill_numbers[i].id,\n          value: _this.props.bill_numbers[i].id,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 19\n          }\n        }, _this.props.bill_numbers[i].id));\n      }\n\n      return items;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getBillByPatientId\", function (event) {\n      if (event.target.value) {\n        _this.setState({\n          patientId: event.target.value\n        });\n\n        var patientId = event.target.value;\n        console.log(\"patientId\", patientId);\n\n        _this.props.dispatch(getBillNumber({\n          id: patientId\n        }));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getBillNumberById\", function (event) {\n      if (event.target.value) {\n        _this.setState({\n          billingId: event.target.value\n        });\n\n        var BillId = event.target.value;\n\n        for (var i = 0; i < _this.props.bill_numbers.length; i++) {\n          if (_this.props.bill_numbers[i].id == BillId) {\n            console.log(_this.props.bill_numbers[i]);\n            var payAmount = _this.props.bill_numbers[i].totalAmount - _this.props.bill_numbers[i].amount;\n\n            _this.setState({\n              orderBillId: _this.props.bill_numbers[i].id,\n              payAmount: payAmount,\n              totalAmount: _this.props.bill_numbers[i].totalAmount,\n              paidAmount: _this.props.bill_numbers[i].amount\n            });\n          }\n        } // this.props.dispatch(getBillNumber(event.target.value));\n\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"submit\", function (event) {\n      event.preventDefault();\n\n      if (_this.state.orderBillId == 0) {\n        toast.error(\"Please select patient!\");\n      } else if (_this.state.orderBillId == 0) {\n        toast.error(\"Please select Bill No.\");\n      } else if (_this.state.payAmount == 0) {\n        toast.error(\"Please fill amount filed.\");\n      } else {\n        if (_this.state.orderBillId != 0 && _this.state.orderBillId != 0 && _this.state.payAmount != 0) {\n          _this.props.dispatch(createBill({\n            id: _this.state.orderBillId,\n            amount: _this.state.payAmount\n          }));\n        }\n\n        _this.setState({\n          patientId: 0,\n          billingId: 0,\n          orderBillId: 0,\n          payAmount: 0,\n          totalAmount: 0,\n          paidAmount: 0\n        });\n      }\n    });\n\n    _this.pageSize = 20;\n    _this.pagesCount = Math.ceil(_this.props.ordered_billings.length / _this.pageSize);\n    _this.state = {\n      currentPage: 0,\n      pageSize: 20,\n      pagesCount: 0,\n      patientId: 0,\n      billingId: 0,\n      orderBillId: 0,\n      payAmount: 0,\n      totalAmount: 0,\n      paidAmount: 0\n    };\n    return _this;\n  }\n\n  _createClass(Payment, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.props.dispatch(fetchOrderedProgram());\n      this.props.dispatch(getAllPrograms());\n      this.props.dispatch(fetchOfflineUsers());\n      this.props.dispatch(fetchAppoinment());\n      this.props.dispatch(fetchDoctors());\n      this.props.dispatch(fetchOrderedBilling());\n      this.props.dispatch(fetchTests());\n      this.props.dispatch(fetchPaidTests());\n      this.props.dispatch(fetchService());\n      this.props.dispatch(fetchRemainingBillPatientList());\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {// var num = Math.ceil(this.props.ordered_billings.length / this.state.pageSize)\n      // console.log(\"num\",num)\n      // this.setState({\n      //   pagesCount :num\n      // })\n    }\n  }, {\n    key: \"onDropdownSetStateName\",\n    value: function onDropdownSetStateName(e) {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(e, index) {\n      e.preventDefault();\n      this.setState({\n        currentPage: index\n      });\n    }\n  }, {\n    key: \"onDropdownSetStateName\",\n    value: function onDropdownSetStateName(e) {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var currentPage = this.state.currentPage;\n      var pagesCount = Math.ceil(this.props.ordered_billings.length / this.state.pageSize);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(ToastContainer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xl: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Widget, {\n        title: /*#__PURE__*/React.createElement(\"p\", {\n          style: {\n            fontWeight: 700\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 22\n          }\n        }, \"Payment\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xl: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"exampleSelect\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 19\n        }\n      }, \"Patients\"), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"select\",\n        id: \"exampleSelect\",\n        onChange: function onChange(e) {\n          return _this2.getBillByPatientId(e);\n        },\n        value: this.state.patientId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 19\n        }\n      }, this.getPatients())), /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"exampleSelect\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 19\n        }\n      }, \"Bill No.\"), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"select\",\n        id: \"exampleSelect\",\n        onChange: function onChange(e) {\n          return _this2.getBillNumberById(e);\n        },\n        value: this.state.billingId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 19\n        }\n      }, this.getBillingNumber())))), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xl: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        inline: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xl: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 29\n        }\n      }, \"Total\"), \" \", '  :- ', \" \", /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 54\n        }\n      }, this.state.totalAmount)))), /*#__PURE__*/React.createElement(Col, {\n        xl: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 27\n        }\n      }, \"Paid\"), \" \", '  :- ', \" \", /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 51\n        }\n      }, this.state.paidAmount)))), /*#__PURE__*/React.createElement(Col, {\n        xl: 6,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"payment\",\n        hidden: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 25\n        }\n      }, \"Pay Pending Amount*\"), /*#__PURE__*/React.createElement(Input, {\n        style: {\n          width: '100%'\n        },\n        type: \"number\",\n        name: \"payAmount\",\n        id: \"exampleEmail\",\n        placeholder: \"payment\",\n        onChange: function onChange(e) {\n          return _this2.onDropdownSetStateName(e);\n        },\n        value: this.state.payAmount,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 25\n        }\n      }))), /*#__PURE__*/React.createElement(Col, {\n        xl: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick(event) {\n          return _this2.submit(event);\n        },\n        color: \"success\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 27\n        }\n      }, \"Pay\"))))))))));\n    }\n  }]);\n\n  return Payment;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    tests: state.test.tests,\n    paid_tests: state.test.paid_tests,\n    users: state.auth.offline_users,\n    doctors: state.auth.doctors,\n    appoinments: state.appoinment.appoinments,\n    appoinment: state.appoinment.appoinment,\n    ordered_programs: state.program.ordered_programs,\n    program: state.program.program,\n    allProgram: state.program.allProgram,\n    ordered_billings: state.billing.ordered_billings,\n    allServices: state.billing.allServices,\n    remaining_bill_patients: state.billing.remaining_bill_patients,\n    bill_numbers: state.billing.bill_numbers\n  };\n};\n\nexport default withRouter(connect(mapStateToProps)(Payment));","map":{"version":3,"sources":["D:/30-12/setup 2 new/final file/src/pages/payment/Payment.js"],"names":["React","Row","Col","Modal","ModalHeader","ModalBody","ModalFooter","Table","Button","Form","FormGroup","Label","Input","Badge","Pagination","PaginationItem","PaginationLink","withRouter","Redirect","Link","connect","axios","config","s","Widget","fetchAppoinment","fetchOrderedProgram","getAllPrograms","deleteProgram","fetchTests","fetchPaidTests","fetchOrderedBilling","fetchService","fetchRemainingBillPatientList","getBillNumber","createBill","fetchOfflineUsers","fetchDoctors","toast","ToastContainer","Swal","Payment","props","event","row","preventDefault","setState","user","test","id","window","confirm","dispatch","condition","fname","users","filter","e","map","key","i","first_name","last_name","allProgram","title","tests","name","paid_tests","allServices","doctors","val","items","push","remaining_bill_patients","length","userID","amount","totalAmount","get_user_name","bill_numbers","target","value","patientId","console","log","billingId","BillId","payAmount","orderBillId","paidAmount","state","error","pageSize","pagesCount","Math","ceil","ordered_billings","currentPage","index","fontWeight","getBillByPatientId","getPatients","getBillNumberById","getBillingNumber","width","onDropdownSetStateName","submit","Component","mapStateToProps","auth","offline_users","appoinments","appoinment","ordered_programs","program","billing"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Row, Col, Modal, ModalHeader, ModalBody, ModalFooter,  Table, Button,  Form, FormGroup, Label, Input, Badge, Pagination, PaginationItem, PaginationLink   } from \"reactstrap\";\r\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport config from \"../../config.js\"\r\nimport s from \"./Dashboard.module.scss\";\r\nimport Widget from \"../../components/Widget/Widget\";\r\nimport { fetchAppoinment } from \"../../actions/appoinment\";\r\nimport { fetchOrderedProgram,getAllPrograms, deleteProgram } from \"../../actions/program\";\r\nimport { fetchTests, fetchPaidTests } from \"../../actions/test\";\r\nimport { fetchOrderedBilling,fetchService, fetchRemainingBillPatientList, getBillNumber,createBill } from \"../../actions/billing\";\r\nimport { fetchOfflineUsers,fetchDoctors } from \"../../actions/user\";\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport Swal from 'sweetalert2';\r\n\r\n\r\nclass Payment extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.pageSize = 20;\r\n    this.pagesCount = Math.ceil(this.props.ordered_billings.length / this.pageSize);\r\n    this.state = {\r\n    \r\n      currentPage: 0,\r\n      pageSize : 20,\r\n      pagesCount :  0,\r\n      patientId : 0,\r\n      billingId : 0,\r\n      orderBillId : 0,\r\n      payAmount : 0,\r\n      totalAmount : 0,\r\n      paidAmount : 0,\r\n      \r\n    };\r\n\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.props.dispatch(fetchOrderedProgram());\r\n    this.props.dispatch(getAllPrograms());\r\n    this.props.dispatch(fetchOfflineUsers());\r\n    this.props.dispatch(fetchAppoinment());\r\n    this.props.dispatch(fetchDoctors());\r\n    this.props.dispatch(fetchOrderedBilling());\r\n    this.props.dispatch(fetchTests());\r\n    this.props.dispatch(fetchPaidTests());\r\n    this.props.dispatch(fetchService());\r\n    this.props.dispatch(fetchRemainingBillPatientList());\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n\r\n    // var num = Math.ceil(this.props.ordered_billings.length / this.state.pageSize)\r\n    // console.log(\"num\",num)\r\n    // this.setState({\r\n    //   pagesCount :num\r\n    // })\r\n  }\r\n\r\n  onEdit = (event, row) => {\r\n    event.preventDefault();\r\n    this.setState({\r\n      user: 0,\r\n      test: 0,\r\n    })\r\n  }\r\n\r\n  onDelete = (event, id) => {\r\n    event.preventDefault();\r\n    if (window.confirm(\"Delete the item?\")) {\r\n      this.props.dispatch(deleteProgram({id: id}));\r\n    }\r\n  }\r\n\r\n   onDropdownSetStateName(e) {\r\n     this.setState({[e.target.name]: e.target.value})\r\n   }\r\n  \r\n\r\n  get_user_name = (condition) => {\r\n    let fname = '';\r\n      this.props.users.filter((e) => e.id === condition).map((key, i) => (\r\n        fname = key.first_name + \" \" + key.last_name\r\n      ))\r\n    return fname\r\n    };\r\n\r\n    get_program_name = (condition) => {\r\n      let fname = '';\r\n        this.props.allProgram.filter((e) => e.id === condition).map((key, i) => (\r\n          fname = key.title\r\n        ))\r\n      return fname\r\n      };\r\n\r\n      get_test_name = (condition) => {\r\n      let fname = '';\r\n        this.props.tests.filter((e) => e.id === condition).map((key, i) => (\r\n          fname = key.name\r\n        ))\r\n      return fname\r\n      };\r\n\r\n      get_paid_tests_name = (condition) => {\r\n        let fname = '';\r\n          this.props.paid_tests.filter((e) => e.id === condition).map((key, i) => (\r\n            fname = key.name\r\n          ))\r\n        return fname\r\n        };\r\n\r\n        get_service_name = (condition) => {\r\n          let fname = '';\r\n            this.props.allServices.filter((e) => e.id === condition).map((key, i) => (\r\n              fname = key.title\r\n            ))\r\n          return fname\r\n          };\r\n\r\n        \r\n\r\n  get_doctor_name = (condition) => {\r\n    let fname = '';\r\n      this.props.doctors.filter((e) => e.id === condition).map((key, i) => (\r\n        fname = key.first_name + \" \" + key.last_name\r\n      ))\r\n    return fname\r\n    };\r\n\r\n\r\n  handleClick(e, index) {\r\n    \r\n    e.preventDefault();\r\n\r\n    this.setState({\r\n      currentPage: index\r\n    });\r\n    \r\n  }\r\n\r\n  createSelectItemsPatients = (val) => {\r\n\r\n    let items = [];\r\n    items.push(<option key={0} value='' >Select Patients</option>);\r\n    for (let i = 0; i < this.props.remaining_bill_patients.length; i++) {\r\n      //console.log(i);\r\n       items.push(<option key={this.props.remaining_bill_patients[i].id} value={this.props.remaining_bill_patients[i].id} >{this.props.remaining_bill_patients[i].first_name} {this.props.doctors[i].last_name}</option>);\r\n    }\r\n\r\n    return items;\r\n  }\r\n\r\n  getPatients = () =>{\r\n    let items = [];\r\n    items.push(<option key={-1} value='' >Select Patients</option>);\r\n    for (let i = 0; i < this.props.remaining_bill_patients.length; i++) {\r\n      //console.log(i);\r\n      if(this.props.remaining_bill_patients[i].userID != 0 && this.props.remaining_bill_patients[i].amount != this.props.remaining_bill_patients[i].totalAmount)\r\n       items.push(<option key={this.props.remaining_bill_patients[i].id} value={this.props.remaining_bill_patients[i].userID} >{this.get_user_name(this.props.remaining_bill_patients[i].userID)}</option>);\r\n    }\r\n\r\n    return items;\r\n  }\r\n\r\n  getBillingNumber = () =>{\r\n    let items = [];\r\n    items.push(<option key={0} value='' >Select Bill</option>);\r\n    for (let i = 0; i < this.props.bill_numbers.length; i++) {\r\n      //console.log(i);\r\n      if(this.props.bill_numbers[i].id != 0 && this.props.bill_numbers[i].amount != this.props.bill_numbers[i].totalAmount)\r\n       items.push(<option key={this.props.bill_numbers[i].id} value={this.props.bill_numbers[i].id} >{this.props.bill_numbers[i].id}</option>);\r\n    }\r\n\r\n    return items;\r\n  }\r\n\r\n  getBillByPatientId = (event) => {\r\n\r\n    if(event.target.value){\r\n      this.setState({patientId: event.target.value})\r\n      var patientId = event.target.value\r\n      console.log(\"patientId\",patientId)\r\n      this.props.dispatch(getBillNumber({id: patientId}));\r\n    }\r\n    \r\n    \r\n  }\r\n\r\n  getBillNumberById = (event) => {\r\n\r\n    if(event.target.value){\r\n      this.setState({billingId: event.target.value})\r\n      var BillId = event.target.value\r\n      for (let i = 0; i < this.props.bill_numbers.length; i++) {\r\n\r\n        if(this.props.bill_numbers[i].id == BillId){\r\n\r\n          console.log(this.props.bill_numbers[i])\r\n          var payAmount = this.props.bill_numbers[i].totalAmount - this.props.bill_numbers[i].amount;\r\n          this.setState({\r\n            orderBillId : this.props.bill_numbers[i].id,\r\n            payAmount : payAmount,\r\n            totalAmount : this.props.bill_numbers[i].totalAmount,\r\n            paidAmount : this.props.bill_numbers[i].amount\r\n          })\r\n\r\n        }\r\n        \r\n      }\r\n      \r\n      // this.props.dispatch(getBillNumber(event.target.value));\r\n    }\r\n    \r\n    \r\n  }\r\n\r\n  onDropdownSetStateName(e) {\r\n    this.setState({[e.target.name]: e.target.value})\r\n  }\r\n\r\n  submit = (event) => {\r\n    event.preventDefault();\r\n      if (this.state.orderBillId == 0) {\r\n        toast.error(\"Please select patient!\");\r\n      }else if (this.state.orderBillId == 0) {\r\n        toast.error(\"Please select Bill No.\");\r\n      }else if (this.state.payAmount == 0) {\r\n        toast.error(\"Please fill amount filed.\");\r\n      }else {\r\n\r\n        if(this.state.orderBillId != 0 && this.state.orderBillId != 0 && this.state.payAmount != 0){\r\n          this.props.dispatch(createBill({id: this.state.orderBillId, amount: this.state.payAmount}))\r\n        }\r\n        this.setState({\r\n          patientId : 0,\r\n          billingId : 0,\r\n          orderBillId : 0,\r\n          payAmount : 0,\r\n          totalAmount : 0,\r\n          paidAmount : 0,\r\n        })\r\n      }\r\n  }\r\n\r\n  render() {\r\n    const { currentPage } = this.state;\r\n    var pagesCount = Math.ceil(this.props.ordered_billings.length / this.state.pageSize)\r\n    \r\n    return (\r\n      <div>\r\n      <ToastContainer />\r\n        <Row>\r\n          <Col xl={12} >\r\n            <Widget\r\n              title={<p style={{ fontWeight: 700 }}>Payment</p>}\r\n            >\r\n              <Row>\r\n                <Col xl={12} >\r\n                <FormGroup>\r\n                  <Label for=\"exampleSelect\">Patients</Label>\r\n                  <Input \r\n                  type=\"select\" \r\n                  name=\"select\" \r\n                  id=\"exampleSelect\"\r\n                  onChange={(e) => this.getBillByPatientId(e)}\r\n                  value={this.state.patientId}\r\n                  \r\n                  >\r\n                    {this.getPatients()}\r\n                  </Input>\r\n                </FormGroup>\r\n                <FormGroup>\r\n                  <Label for=\"exampleSelect\">Bill No.</Label>\r\n                  <Input \r\n                  type=\"select\" \r\n                  name=\"select\" \r\n                  id=\"exampleSelect\"\r\n                  onChange={(e) => this.getBillNumberById(e)}\r\n                  value={this.state.billingId}\r\n                  >\r\n                    {this.getBillingNumber()}\r\n                  </Input>\r\n                </FormGroup>\r\n                </Col>\r\n              </Row>\r\n              \r\n              <br/>\r\n\r\n                <Row>\r\n                <Col xl={12} >\r\n                  <Form inline >\r\n                    <Col xl={2} >\r\n                        <FormGroup  >\r\n                          <Label >\r\n                            <h4>Total</h4> {'  :- '} <h5>{this.state.totalAmount}</h5>\r\n                          </Label>\r\n                        </FormGroup>\r\n                        \r\n                      </Col>\r\n                      <Col xl={2} >\r\n                        <FormGroup  >\r\n                          <Label >\r\n                          <h4>Paid</h4> {'  :- '} <h5>{this.state.paidAmount}</h5>\r\n                          </Label>\r\n                        </FormGroup>\r\n                      </Col>\r\n                      <Col xl={6} >\r\n                        <FormGroup  >\r\n                        <Label for=\"payment\" hidden>Pay Pending Amount*</Label>\r\n                        <Input style={{width: '100%'}} type=\"number\" name=\"payAmount\" id=\"exampleEmail\" placeholder=\"payment\" onChange={(e) => this.onDropdownSetStateName(e)}  value={this.state.payAmount} />\r\n                      </FormGroup>\r\n                      </Col>\r\n                      <Col xl={2} >\r\n                        <FormGroup  >\r\n                          <Button onClick={(event) => this.submit(event)}  color=\"success\" >Pay</Button>\r\n                      </FormGroup>\r\n                      </Col>\r\n                  </Form>\r\n                  </Col>\r\n                </Row>\r\n              \r\n            </Widget>\r\n          </Col>\r\n        </Row>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  tests: state.test.tests,\r\n  paid_tests: state.test.paid_tests,\r\n  users : state.auth.offline_users,\r\n  doctors : state.auth.doctors,\r\n  appoinments : state.appoinment.appoinments,\r\n  appoinment : state.appoinment.appoinment,\r\n  ordered_programs : state.program.ordered_programs,\r\n  program : state.program.program,\r\n  allProgram : state.program.allProgram,\r\n  ordered_billings  : state.billing.ordered_billings,\r\n  allServices : state.billing.allServices,\r\n  remaining_bill_patients : state.billing.remaining_bill_patients,\r\n  bill_numbers : state.billing.bill_numbers\r\n\r\n\r\n});\r\n\r\nexport default withRouter(connect(mapStateToProps)(Payment));\r\n"]},"metadata":{},"sourceType":"module"}